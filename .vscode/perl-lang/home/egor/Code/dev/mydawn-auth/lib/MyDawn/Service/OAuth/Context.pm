[{"name":"MyDawn::Service::OAuth::Context","line":0,"kind":2,"defintion":1},{"line":3,"kind":2,"containerName":"","name":"Mouse"},{"kind":12,"line":4,"name":"extends"},{"kind":2,"line":6,"name":"Coro","containerName":""},{"line":7,"kind":2,"containerName":"Time","name":"HiRes"},{"kind":2,"line":8,"name":"POSIX","containerName":""},{"kind":2,"line":9,"name":"Log","containerName":"MR"},{"kind":2,"line":10,"name":"Token","containerName":"MyDawn::OAuth"},{"name":"cookie","kind":12,"line":12},{"kind":12,"line":13,"name":"is"},{"name":"isa","line":14,"kind":12},{"kind":12,"line":15,"name":"lazy"},{"kind":12,"line":16,"name":"default"},{"defintion":"my","kind":13,"line":17,"name":"%cookie","containerName":null},{"kind":13,"line":18,"name":"@cookie","containerName":null,"defintion":"my"},{"line":18,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"params"},{"kind":12,"line":18,"name":"cookie","containerName":"MyDawn::Service::OAuth::Context"},{"name":"$cookie","containerName":null,"kind":13,"line":19},{"line":21,"kind":13,"containerName":null,"name":"$pair","defintion":"my"},{"name":"%cookie","containerName":null,"kind":13,"line":21},{"defintion":"my","containerName":null,"name":"$k","line":22,"kind":13},{"line":22,"kind":13,"containerName":null,"name":"$v"},{"name":"$pair","containerName":null,"kind":13,"line":22},{"name":"%cookie","containerName":null,"kind":13,"line":23},{"name":"$k","containerName":null,"kind":13,"line":23},{"line":23,"kind":13,"containerName":null,"name":"$v"},{"kind":13,"line":23,"name":"$k","containerName":null},{"line":26,"kind":13,"containerName":null,"name":"%cookie"},{"name":"user_agent","line":30,"kind":12},{"line":31,"kind":12,"name":"is"},{"line":32,"kind":12,"name":"isa"},{"line":33,"kind":12,"name":"lazy"},{"kind":12,"line":34,"name":"default"},{"containerName":"MyDawn::Service::OAuth::Context","name":"env","line":34,"children":[],"kind":12,"defintion":"sub"},{"name":"HTTP_USER_AGENT","line":34,"kind":12},{"name":"remote_addr","kind":12,"line":37},{"line":38,"kind":12,"name":"is"},{"line":39,"kind":12,"name":"isa"},{"name":"lazy","line":40,"kind":12},{"kind":12,"line":41,"name":"default"},{"name":"env","containerName":"MyDawn::Service::OAuth::Context","children":[{"kind":13,"line":54,"name":"$auth","containerName":"env","defintion":"my"},{"defintion":"my","name":"$token_type","containerName":"env","kind":13,"line":55},{"kind":13,"line":55,"name":"$access_token","containerName":"env"},{"containerName":"env","name":"$auth","line":55,"kind":13},{"containerName":"env","name":"$token_type","line":56,"kind":13},{"containerName":"env","name":"$access_token","line":56,"kind":13},{"kind":13,"line":57,"name":"$token_type","containerName":"env"},{"containerName":"env","name":"$token","line":58,"kind":13,"defintion":"my"},{"name":"$access_token","containerName":"env","kind":13,"line":58},{"kind":13,"line":59,"name":"$token","containerName":"env"},{"line":59,"kind":13,"containerName":"env","name":"$token"},{"name":"$token","containerName":"env","kind":13,"line":60}],"line":41,"defintion":"sub","kind":12},{"name":"REMOTE_ADDR","kind":12,"line":41},{"name":"oauth_login_status","kind":12,"line":44},{"name":"is","kind":12,"line":45},{"name":"isa","line":46,"kind":12},{"name":"auth_token","line":49,"kind":12},{"name":"is","kind":12,"line":50},{"kind":12,"line":51,"name":"isa"},{"kind":12,"line":52,"name":"lazy"},{"name":"default","line":53,"kind":12},{"name":"params","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":54},{"line":54,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"authorization"},{"name":"responses","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":56},{"containerName":"MyDawn::Service::OAuth::Context","name":"unauthorized","line":56,"kind":12},{"kind":12,"line":58,"name":"MyDawn","containerName":"OAuth::Token"},{"kind":12,"line":58,"name":"select_by_access_token","containerName":"MyDawn::Service::OAuth::Context"},{"containerName":"MyDawn::Service::OAuth::Context","name":"responses","line":59,"kind":12},{"line":59,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"unauthorized"},{"name":"expires_in","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":59},{"name":"log_warn","line":62,"kind":12},{"name":"responses","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":63},{"kind":12,"line":63,"name":"unauthorized","containerName":"MyDawn::Service::OAuth::Context"},{"containerName":"MyDawn::Service::OAuth::Context","name":"setup_log_config","children":[{"defintion":"my","name":"$self","containerName":"setup_log_config","kind":13,"line":69},{"kind":13,"line":69,"name":"$user_id","containerName":"setup_log_config"},{"kind":13,"line":69,"name":"$external_id","containerName":"setup_log_config"},{"defintion":"my","line":70,"kind":13,"containerName":"setup_log_config","name":"$coro_id"},{"containerName":"setup_log_config","name":"$user_id","line":71,"kind":13},{"containerName":"setup_log_config","name":"$external_id","line":72,"kind":13},{"kind":13,"line":75,"name":"$user_id","containerName":"setup_log_config"},{"line":76,"kind":13,"containerName":"setup_log_config","name":"$external_id"},{"name":"$coro_id","containerName":"setup_log_config","kind":13,"line":77},{"kind":13,"line":80,"name":"$logformat","containerName":"setup_log_config","defintion":"my"},{"defintion":"sub","containerName":"setup_log_config","name":"$coro_id","line":80,"kind":13},{"name":"$self","containerName":"setup_log_config","kind":13,"line":81},{"kind":13,"line":81,"name":"$external_id","containerName":"setup_log_config"},{"containerName":"setup_log_config","name":"$user_id","line":81,"kind":13},{"name":"$logformat","containerName":"setup_log_config","kind":13,"line":84}],"line":68,"defintion":"sub","kind":12},{"name":"uwsgi","containerName":"set_logvar","kind":12,"line":75},{"line":76,"kind":12,"containerName":"set_logvar","name":"uwsgi"},{"kind":12,"line":77,"name":"uwsgi","containerName":"get_logvar"},{"name":"strftime","kind":12,"line":81},{"kind":12,"line":81,"name":"modf"},{"name":"Time","containerName":"HiRes::time","kind":12,"line":81},{"name":"env","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":81},{"kind":12,"line":84,"name":"MR","containerName":"Log::log_config"},{"kind":12,"line":84,"name":"prefix"},{"name":"token_handler","containerName":"MyDawn::Service::OAuth::Context","children":[{"line":88,"kind":13,"containerName":"token_handler","name":"$self","defintion":"my"},{"kind":13,"line":88,"name":"%params","containerName":"token_handler"},{"defintion":"my","kind":13,"line":89,"name":"$class","containerName":"token_handler"},{"containerName":"token_handler","name":"$params","line":89,"kind":13},{"defintion":"my","name":"$params","containerName":"token_handler","kind":13,"line":90},{"name":"$self","containerName":"token_handler","kind":13,"line":90},{"containerName":"token_handler","name":"$params","line":91,"kind":13},{"line":93,"kind":13,"containerName":"token_handler","name":"$class"},{"kind":13,"line":93,"name":"$self","containerName":"token_handler"},{"line":93,"kind":13,"containerName":"token_handler","name":"$params"},{"line":93,"kind":13,"containerName":"token_handler","name":"$params"},{"containerName":"token_handler","name":"$auth_info","line":96,"kind":13,"defintion":"my"},{"name":"$class","containerName":"token_handler","kind":13,"line":96},{"name":"$params","containerName":"token_handler","kind":13,"line":96},{"name":"$params","containerName":"token_handler","kind":13,"line":96},{"containerName":"token_handler","name":"$auth_info","line":97,"kind":13},{"kind":13,"line":97,"name":"$auth_info","containerName":"token_handler"},{"name":"$auth_info","containerName":"token_handler","kind":13,"line":98},{"containerName":"token_handler","name":"$class","line":99,"kind":13},{"containerName":"token_handler","name":"$self","line":99,"kind":13},{"line":99,"kind":13,"containerName":"token_handler","name":"$auth_info"},{"kind":13,"line":99,"name":"$auth_info","containerName":"token_handler"},{"kind":13,"line":102,"name":"$device_os","containerName":"token_handler","defintion":"my"},{"line":102,"kind":13,"containerName":"token_handler","name":"$device_id"},{"kind":13,"line":102,"name":"$params","containerName":"token_handler"},{"name":"$current_token","containerName":"token_handler","kind":13,"line":103,"defintion":"my"},{"kind":13,"line":103,"name":"$device_os","containerName":"token_handler"},{"line":103,"kind":13,"containerName":"token_handler","name":"$device_id"},{"line":104,"kind":13,"containerName":"token_handler","name":"$device_token","defintion":"my"},{"name":"$current_token","containerName":"token_handler","kind":13,"line":104},{"name":"$current_token","containerName":"token_handler","kind":13,"line":104},{"defintion":"my","kind":13,"line":105,"name":"$token","containerName":"token_handler"},{"kind":13,"line":106,"name":"$device_os","containerName":"token_handler"},{"kind":13,"line":107,"name":"$device_id","containerName":"token_handler"},{"line":108,"kind":13,"containerName":"token_handler","name":"$device_token"},{"containerName":"token_handler","name":"$class","line":109,"kind":13},{"kind":13,"line":110,"name":"$auth_info","containerName":"token_handler"},{"containerName":"token_handler","name":"$auth_info","line":111,"kind":13},{"line":112,"kind":13,"containerName":"token_handler","name":"$auth_info"},{"name":"$params","containerName":"token_handler","kind":13,"line":113},{"name":"$params","containerName":"token_handler","kind":13,"line":113},{"line":113,"kind":13,"containerName":"token_handler","name":"$auth_info"},{"defintion":"my","kind":13,"line":116,"name":"$status","containerName":"token_handler"},{"kind":13,"line":116,"name":"$error","containerName":"token_handler"},{"kind":13,"line":117,"name":"$token","containerName":"token_handler"},{"containerName":"token_handler","name":"$status","line":117,"kind":13},{"name":"$error","containerName":"token_handler","kind":13,"line":117},{"line":117,"kind":13,"containerName":"token_handler","name":"$self"},{"kind":13,"line":117,"name":"$current_token","containerName":"token_handler"},{"line":117,"kind":13,"containerName":"token_handler","name":"$token"},{"line":119,"kind":13,"containerName":"token_handler","name":"$error"},{"kind":13,"line":120,"name":"$error","containerName":"token_handler"},{"name":"$self","containerName":"token_handler","kind":13,"line":121},{"name":"$error","containerName":"token_handler","kind":13,"line":121},{"name":"$self","containerName":"token_handler","kind":13,"line":123},{"containerName":"token_handler","name":"$status","line":123,"kind":13},{"containerName":"token_handler","name":"$self","line":124,"kind":13},{"name":"$status","containerName":"token_handler","kind":13,"line":124},{"line":125,"kind":13,"containerName":"token_handler","name":"$self"},{"line":125,"kind":13,"containerName":"token_handler","name":"$status"},{"line":125,"kind":13,"containerName":"token_handler","name":"$status"},{"line":126,"kind":13,"containerName":"token_handler","name":"$token"}],"line":87,"kind":12,"defintion":"sub"},{"kind":12,"line":89,"name":"api_class"},{"kind":12,"line":90,"name":"params","containerName":"MyDawn::Service::OAuth::Context"},{"kind":12,"line":91,"name":"error","containerName":"MyDawn::Service::OAuth::Context"},{"kind":12,"line":92,"name":"log_error"},{"containerName":"MyDawn::Service::OAuth::Context","name":"_die_with_error","line":93,"kind":12},{"line":93,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"error"},{"containerName":"MyDawn::Service::OAuth::Context","name":"error_description","line":93,"kind":12},{"kind":12,"line":96,"name":"social_class","containerName":"MyDawn::Service::OAuth::Context"},{"containerName":"MyDawn::Service::OAuth::Context","name":"new","line":96,"kind":12},{"containerName":"MyDawn::Service::OAuth::Context","name":"get_auth_info","line":96,"kind":12},{"kind":12,"line":96,"name":"code"},{"line":96,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"code"},{"name":"redirect_uri","line":96,"kind":12},{"line":96,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"redirect_uri"},{"kind":12,"line":97,"name":"error"},{"line":97,"kind":12,"name":"access_token"},{"line":98,"kind":12,"name":"log_error"},{"name":"_die_with_error","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":99},{"line":99,"kind":12,"name":"error"},{"kind":12,"line":99,"name":"error_description"},{"name":"state","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":102},{"line":103,"kind":12,"containerName":"OAuth::Token","name":"MyDawn"},{"name":"select_by_device","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":103},{"containerName":"MyDawn::Service::OAuth::Context","name":"device_token","line":104,"kind":12},{"kind":12,"line":105,"name":"MyDawn","containerName":"OAuth::Token"},{"containerName":"MyDawn::Service::OAuth::Context","name":"new","line":105,"kind":12},{"name":"device_os","kind":12,"line":106},{"name":"device_id","kind":12,"line":107},{"kind":12,"line":108,"name":"device_token"},{"name":"oauth_source","kind":12,"line":109},{"name":"source","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":109},{"name":"oauth_access_token","line":110,"kind":12},{"line":110,"kind":12,"name":"access_token"},{"kind":12,"line":111,"name":"oauth_refresh_token"},{"kind":12,"line":111,"name":"refresh_token"},{"name":"oauth_expire_time","line":112,"kind":12},{"name":"expires_in","line":112,"kind":12},{"name":"extra_token_params","kind":12,"line":113},{"name":"extra_token_params","kind":12,"line":113},{"containerName":"MyDawn::Service::OAuth::Context","name":"token_process","line":117,"kind":12},{"name":"current_token","line":117,"kind":12},{"line":117,"kind":12,"name":"new_token"},{"line":120,"kind":12,"name":"log_dbg1"},{"name":"responses","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":121},{"line":121,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"oauth_invalid_request"},{"kind":12,"line":121,"name":"args"},{"name":"responses","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":123},{"name":"oauth_invalid_request","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":123},{"line":123,"kind":12,"name":"args"},{"containerName":"MyDawn::Service::OAuth::Context","name":"oauth_login_status","line":124,"kind":12},{"containerName":"MyDawn::Service::OAuth::Context","name":"header","line":125,"kind":12},{"kind":12,"line":125,"name":"MyDawn","containerName":"OAuth::Const::LINK_STATUS"},{"kind":12,"defintion":"sub","line":129,"children":[{"line":130,"kind":13,"containerName":"token_process","name":"$self","defintion":"my"},{"kind":13,"line":130,"name":"%params","containerName":"token_process"},{"kind":13,"line":131,"name":"$current_token","containerName":"token_process","defintion":"my"},{"line":131,"kind":13,"containerName":"token_process","name":"$params"},{"defintion":"my","name":"$token","containerName":"token_process","kind":13,"line":132},{"line":132,"kind":13,"containerName":"token_process","name":"$params"},{"name":"$result","containerName":"token_process","kind":13,"line":133,"defintion":"my"},{"defintion":"my","line":134,"kind":13,"containerName":"token_process","name":"$app_access_token"},{"line":134,"kind":13,"containerName":"token_process","name":"$self"},{"kind":13,"line":135,"name":"$app_access_token","containerName":"token_process"},{"containerName":"token_process","name":"$current_token","line":136,"kind":13},{"name":"$current_token","containerName":"token_process","kind":13,"line":136},{"containerName":"token_process","name":"$app_access_token","line":136,"kind":13},{"containerName":"token_process","name":"$self","line":138,"kind":13},{"line":140,"kind":13,"containerName":"token_process","name":"$result"},{"name":"$token","containerName":"token_process","kind":13,"line":140},{"line":140,"kind":13,"containerName":"token_process","name":"$app_access_token"},{"line":141,"kind":13,"containerName":"token_process","name":"$token"},{"line":141,"kind":13,"containerName":"token_process","name":"$current_token"},{"kind":13,"line":141,"name":"$result","containerName":"token_process"},{"line":143,"kind":13,"containerName":"token_process","name":"$current_token"},{"line":143,"kind":13,"containerName":"token_process","name":"$current_token"},{"containerName":"token_process","name":"$result","line":144,"kind":13},{"name":"$token","containerName":"token_process","kind":13,"line":144},{"containerName":"token_process","name":"%params","line":144,"kind":13},{"containerName":"token_process","name":"$result","line":145,"kind":13},{"name":"$status","containerName":"token_process","kind":13,"line":147,"defintion":"my"},{"name":"$error","containerName":"token_process","kind":13,"line":147},{"name":"$status","containerName":"token_process","kind":13,"line":148},{"line":148,"kind":13,"containerName":"token_process","name":"$error"},{"containerName":"token_process","name":"$result","line":148,"kind":13},{"kind":13,"line":148,"name":"$result","containerName":"token_process"},{"containerName":"token_process","name":"$result","line":148,"kind":13},{"containerName":"token_process","name":"$token","line":149,"kind":13},{"name":"$status","containerName":"token_process","kind":13,"line":149},{"line":149,"kind":13,"containerName":"token_process","name":"$error"}],"name":"token_process","containerName":"MyDawn::Service::OAuth::Context"},{"line":131,"kind":12,"name":"current_token"},{"kind":12,"line":132,"name":"new_token"},{"containerName":"MyDawn::Service::OAuth::Context","name":"auth_token","line":134,"kind":12},{"line":136,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"access_token"},{"line":136,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"access_token"},{"name":"log_fatal","line":137,"kind":12},{"line":138,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"responses"},{"kind":12,"line":138,"name":"invalid_param","containerName":"MyDawn::Service::OAuth::Context"},{"name":"error_description","kind":12,"line":138},{"containerName":"MyDawn::Service::OAuth::Context","name":"link","line":140,"kind":12},{"name":"relogin","line":141,"kind":12},{"line":143,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"delete"},{"containerName":"MyDawn::Service::OAuth::Context","name":"insert","line":144,"kind":12},{"line":145,"kind":12,"name":"log_dbg1"},{"kind":12,"line":148,"name":"actor_status"},{"name":"error_description","kind":12,"line":148},{"name":"Mouse","line":152,"kind":12},{"name":"meta","containerName":"MyDawn::Service::OAuth::Context","kind":12,"line":154},{"line":154,"kind":12,"containerName":"MyDawn::Service::OAuth::Context","name":"make_immutable"}]