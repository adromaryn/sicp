[{"kind":2,"line":0,"name":"Founder::Case::Subscription","defintion":1},{"containerName":"","kind":2,"line":1,"name":"strict"},{"kind":2,"containerName":"","line":2,"name":"warnings"},{"line":4,"containerName":"","kind":2,"name":"base"},{"line":5,"containerName":"Test","kind":2,"name":"More"},{"kind":2,"containerName":"","line":7,"name":"DateTime"},{"name":"User","line":9,"kind":2,"containerName":"Founder::Test"},{"kind":2,"containerName":"Founder::Test","line":10,"name":"Blogger"},{"line":11,"containerName":"Founder::Test","kind":2,"name":"Payment"},{"line":13,"containerName":"Founder","kind":2,"name":"Subscription"},{"kind":2,"containerName":"Founder::Subscription","line":14,"name":"Level"},{"children":[{"name":"$self","defintion":"my","kind":13,"containerName":"init_users","line":18},{"name":"$self","containerName":"init_users","kind":13,"line":19},{"line":20,"containerName":"init_users","kind":13,"name":"$self"},{"name":"$self","line":21,"containerName":"init_users","kind":13}],"containerName":"Founder::Case::Subscription","kind":12,"line":17,"name":"init_users","defintion":"sub"},{"name":"Test","kind":12,"line":17},{"line":17,"kind":12,"name":"startup"},{"name":"user1","kind":12,"line":19},{"kind":12,"containerName":"Test::User","line":19,"name":"Founder"},{"name":"create","line":19,"containerName":"Founder::Case::Subscription","kind":12},{"name":"user2","kind":12,"line":20},{"kind":12,"containerName":"Test::User","line":20,"name":"Founder"},{"name":"create","line":20,"kind":12,"containerName":"Founder::Case::Subscription"},{"name":"owner","kind":12,"line":21},{"name":"Founder","kind":12,"containerName":"Test::Blogger","line":21},{"containerName":"Founder::Case::Subscription","kind":12,"line":21,"name":"create"},{"defintion":"sub","name":"before_payments","line":24,"containerName":"Founder::Case::Subscription","kind":12,"children":[{"name":"$self","defintion":"my","kind":13,"containerName":"before_payments","line":25},{"containerName":"before_payments","kind":13,"line":26,"name":"$self"}]},{"name":"Test","line":24,"kind":12},{"line":24,"kind":12,"name":"setup"},{"line":26,"kind":12,"name":"payments"},{"defintion":"sub","name":"clean_payments","line":29,"containerName":"Founder::Case::Subscription","kind":12,"children":[{"line":30,"kind":13,"containerName":"clean_payments","defintion":"my","name":"$self"},{"containerName":"clean_payments","kind":13,"line":31,"name":"$payment","defintion":"my"},{"name":"$self","line":31,"kind":13,"containerName":"clean_payments"},{"name":"$payment","kind":13,"containerName":"clean_payments","line":32}]},{"line":29,"kind":12,"name":"Test"},{"line":29,"kind":12,"name":"teardown"},{"line":31,"kind":12,"name":"payments"},{"name":"clean","containerName":"Founder::Case::Subscription","kind":12,"line":32},{"line":34,"kind":12,"name":"is"},{"kind":12,"containerName":"Test::Payment","line":34,"name":"Founder"},{"kind":12,"containerName":"Founder::Case::Subscription","line":34,"name":"count"},{"kind":12,"containerName":"Founder::Case::Subscription","children":[{"containerName":"clean_users","kind":13,"line":38,"name":"$self","defintion":"my"},{"containerName":"clean_users","kind":13,"line":39,"name":"$user1","defintion":"my"},{"line":39,"kind":13,"containerName":"clean_users","name":"$self"},{"line":40,"containerName":"clean_users","kind":13,"defintion":"my","name":"$user2"},{"line":40,"kind":13,"containerName":"clean_users","name":"$self"},{"kind":13,"containerName":"clean_users","line":41,"name":"$owner","defintion":"my"},{"line":41,"containerName":"clean_users","kind":13,"name":"$self"},{"defintion":"my","name":"$subs","line":43,"kind":13,"containerName":"clean_users"},{"containerName":"clean_users","kind":13,"line":43,"name":"$owner"},{"defintion":"my","name":"$s","line":44,"kind":13,"containerName":"clean_users"},{"kind":13,"containerName":"clean_users","line":44,"name":"$subs"},{"containerName":"clean_users","kind":13,"line":45,"name":"$s"},{"containerName":"clean_users","kind":13,"line":49,"name":"$subs"},{"kind":13,"containerName":"clean_users","line":49,"name":"$owner"},{"name":"$subs","containerName":"clean_users","kind":13,"line":50},{"containerName":"clean_users","kind":13,"line":52,"name":"$user1"},{"name":"$user2","line":53,"kind":13,"containerName":"clean_users"},{"name":"$owner","line":54,"kind":13,"containerName":"clean_users"}],"line":37,"name":"clean_users","defintion":"sub"},{"name":"Test","kind":12,"line":37},{"kind":12,"line":37,"name":"shutdown"},{"line":39,"kind":12,"name":"user1"},{"line":40,"kind":12,"name":"user2"},{"name":"owner","kind":12,"line":41},{"name":"Founder","line":43,"containerName":"Subscription","kind":12},{"line":43,"kind":12,"containerName":"Founder::Case::Subscription","name":"select_all_by_owner"},{"line":43,"containerName":"Founder::Case::Subscription","kind":12,"name":"id"},{"containerName":"Founder::Case::Subscription","kind":12,"line":45,"name":"delete"},{"kind":12,"line":45,"name":"force"},{"name":"Founder","kind":12,"containerName":"Subscription","line":49},{"line":49,"kind":12,"containerName":"Founder::Case::Subscription","name":"select_all_by_owner"},{"containerName":"Founder::Case::Subscription","kind":12,"line":49,"name":"id"},{"name":"ok","kind":12,"line":50},{"containerName":"Test::User","kind":12,"line":52,"name":"Founder"},{"containerName":"Founder::Case::Subscription","kind":12,"line":52,"name":"clean"},{"name":"Founder","containerName":"Test::User","kind":12,"line":53},{"kind":12,"containerName":"Founder::Case::Subscription","line":53,"name":"clean"},{"line":54,"kind":12,"containerName":"Test::Blogger","name":"Founder"},{"name":"clean","kind":12,"containerName":"Founder::Case::Subscription","line":54},{"name":"is","line":55,"kind":12},{"name":"Founder","containerName":"Test::User","kind":12,"line":55},{"name":"count","kind":12,"containerName":"Founder::Case::Subscription","line":55},{"name":"is","kind":12,"line":56},{"line":56,"containerName":"Test::Blogger","kind":12,"name":"Founder"},{"name":"count","containerName":"Founder::Case::Subscription","kind":12,"line":56},{"children":[{"defintion":"my","name":"$self","line":61,"kind":13,"containerName":"test1_before_sub_pay"},{"line":62,"kind":13,"containerName":"test1_before_sub_pay","defintion":"my","name":"$user1"},{"name":"$self","containerName":"test1_before_sub_pay","kind":13,"line":62},{"name":"$user2","defintion":"my","containerName":"test1_before_sub_pay","kind":13,"line":63},{"line":63,"kind":13,"containerName":"test1_before_sub_pay","name":"$self"},{"containerName":"test1_before_sub_pay","kind":13,"line":64,"name":"$owner","defintion":"my"},{"line":64,"kind":13,"containerName":"test1_before_sub_pay","name":"$self"},{"name":"$u","defintion":"my","containerName":"test1_before_sub_pay","kind":13,"line":66},{"name":"$user1","line":66,"kind":13,"containerName":"test1_before_sub_pay"},{"name":"$user2","containerName":"test1_before_sub_pay","kind":13,"line":66},{"name":"$sub","defintion":"my","containerName":"test1_before_sub_pay","kind":13,"line":67},{"name":"$owner","line":67,"containerName":"test1_before_sub_pay","kind":13},{"name":"$u","line":67,"containerName":"test1_before_sub_pay","kind":13},{"kind":13,"containerName":"test1_before_sub_pay","line":68,"name":"$sub"},{"line":68,"containerName":"test1_before_sub_pay","kind":13,"name":"$u"}],"kind":12,"containerName":"Founder::Case::Subscription","line":60,"name":"test1_before_sub_pay","defintion":"sub"},{"name":"Tests","kind":12,"line":60},{"name":"user1","line":62,"kind":12},{"line":63,"kind":12,"name":"user2"},{"name":"owner","line":64,"kind":12},{"name":"Founder","line":67,"kind":12,"containerName":"Subscription"},{"kind":12,"containerName":"Founder::Case::Subscription","line":67,"name":"select_active"},{"line":67,"kind":12,"containerName":"Founder::Case::Subscription","name":"id"},{"name":"id","line":67,"containerName":"Founder::Case::Subscription","kind":12},{"line":68,"kind":12,"name":"ok"},{"line":68,"containerName":"Founder::Case::Subscription","kind":12,"name":"name"},{"line":72,"children":[{"line":73,"containerName":"test2_sub_pay","kind":13,"defintion":"my","name":"$self"},{"line":74,"kind":13,"containerName":"test2_sub_pay","defintion":"my","name":"$user1"},{"kind":13,"containerName":"test2_sub_pay","line":74,"name":"$self"},{"containerName":"test2_sub_pay","kind":13,"line":75,"name":"$user2","defintion":"my"},{"name":"$self","kind":13,"containerName":"test2_sub_pay","line":75},{"name":"$owner","defintion":"my","kind":13,"containerName":"test2_sub_pay","line":76},{"line":76,"kind":13,"containerName":"test2_sub_pay","name":"$self"},{"defintion":"my","name":"$levels","line":78,"containerName":"test2_sub_pay","kind":13},{"name":"$owner","containerName":"test2_sub_pay","kind":13,"line":78},{"kind":13,"containerName":"test2_sub_pay","line":79,"name":"@paid_levels","defintion":"my"},{"line":79,"kind":13,"containerName":"test2_sub_pay","name":"$levels"},{"line":80,"containerName":"test2_sub_pay","kind":13,"defintion":"my","name":"$level"},{"kind":13,"containerName":"test2_sub_pay","line":80,"name":"$paid_levels"},{"containerName":"test2_sub_pay","kind":13,"line":83,"name":"$payment_paid","defintion":"my"},{"name":"$user1","line":84,"kind":13,"containerName":"test2_sub_pay"},{"name":"$owner","containerName":"test2_sub_pay","kind":13,"line":85},{"name":"$level","containerName":"test2_sub_pay","kind":13,"line":86},{"name":"$level","kind":13,"containerName":"test2_sub_pay","line":88},{"name":"$self","line":90,"kind":13,"containerName":"test2_sub_pay"},{"name":"$payment_paid","line":90,"containerName":"test2_sub_pay","kind":13},{"name":"$payment_paid","line":91,"containerName":"test2_sub_pay","kind":13},{"name":"$sub1","defintion":"my","containerName":"test2_sub_pay","kind":13,"line":93},{"line":93,"kind":13,"containerName":"test2_sub_pay","name":"$owner"},{"kind":13,"containerName":"test2_sub_pay","line":93,"name":"$user1"},{"kind":13,"containerName":"test2_sub_pay","line":94,"name":"$sub1"},{"name":"$sub1","line":95,"containerName":"test2_sub_pay","kind":13},{"name":"$sub1","line":96,"containerName":"test2_sub_pay","kind":13},{"line":97,"kind":13,"containerName":"test2_sub_pay","name":"$sub1"},{"kind":13,"containerName":"test2_sub_pay","line":97,"name":"$level"},{"line":100,"kind":13,"containerName":"test2_sub_pay","defintion":"my","name":"$payment_rejected"},{"kind":13,"containerName":"test2_sub_pay","line":101,"name":"$user2"},{"line":102,"containerName":"test2_sub_pay","kind":13,"name":"$owner"},{"line":103,"kind":13,"containerName":"test2_sub_pay","name":"$level"},{"name":"$self","line":106,"kind":13,"containerName":"test2_sub_pay"},{"containerName":"test2_sub_pay","kind":13,"line":106,"name":"$payment_rejected"},{"name":"$payment_rejected","containerName":"test2_sub_pay","kind":13,"line":107},{"defintion":"my","name":"$sub2","line":109,"kind":13,"containerName":"test2_sub_pay"},{"line":109,"containerName":"test2_sub_pay","kind":13,"name":"$owner"},{"line":109,"kind":13,"containerName":"test2_sub_pay","name":"$user2"},{"line":110,"containerName":"test2_sub_pay","kind":13,"name":"$sub2"},{"kind":13,"containerName":"test2_sub_pay","line":113,"name":"$payment2_paid","defintion":"my"},{"name":"$user2","line":114,"kind":13,"containerName":"test2_sub_pay"},{"name":"$owner","line":115,"containerName":"test2_sub_pay","kind":13},{"name":"$level","line":116,"kind":13,"containerName":"test2_sub_pay"},{"line":119,"kind":13,"containerName":"test2_sub_pay","name":"$level"},{"name":"$self","containerName":"test2_sub_pay","kind":13,"line":121},{"name":"$payment2_paid","line":121,"kind":13,"containerName":"test2_sub_pay"},{"name":"$payment2_paid","line":122,"containerName":"test2_sub_pay","kind":13},{"name":"$sub3","defintion":"my","kind":13,"containerName":"test2_sub_pay","line":124},{"name":"$owner","line":124,"containerName":"test2_sub_pay","kind":13},{"containerName":"test2_sub_pay","kind":13,"line":124,"name":"$user2"},{"kind":13,"containerName":"test2_sub_pay","line":125,"name":"$sub3"},{"name":"$sub3","line":126,"kind":13,"containerName":"test2_sub_pay"},{"name":"$sub3","containerName":"test2_sub_pay","kind":13,"line":127},{"line":127,"kind":13,"containerName":"test2_sub_pay","name":"$level"},{"name":"$sub3","line":128,"kind":13,"containerName":"test2_sub_pay"},{"name":"$level","containerName":"test2_sub_pay","kind":13,"line":128}],"kind":12,"containerName":"Founder::Case::Subscription","defintion":"sub","name":"test2_sub_pay"},{"name":"Tests","kind":12,"line":72},{"line":74,"kind":12,"name":"user1"},{"name":"user2","kind":12,"line":75},{"name":"owner","line":76,"kind":12},{"line":78,"containerName":"Subscription::Level","kind":12,"name":"Founder"},{"name":"select_by_owner_id","kind":12,"containerName":"Founder::Case::Subscription","line":78},{"name":"id","line":78,"kind":12,"containerName":"Founder::Case::Subscription"},{"name":"price","line":79,"containerName":"Founder::Case::Subscription","kind":12},{"line":83,"containerName":"Test::Payment","kind":12,"name":"Founder"},{"kind":12,"containerName":"Founder::Case::Subscription","line":83,"name":"init"},{"name":"level_id","line":86,"kind":12},{"line":86,"containerName":"Founder::Case::Subscription","kind":12,"name":"id"},{"line":87,"kind":12,"name":"payment_type"},{"line":88,"kind":12,"name":"price"},{"name":"price","line":88,"kind":12,"containerName":"Founder::Case::Subscription"},{"name":"payments","kind":12,"line":90},{"name":"notify_paid","line":91,"containerName":"Founder::Case::Subscription","kind":12},{"name":"Founder","containerName":"Subscription","kind":12,"line":93},{"line":93,"containerName":"Founder::Case::Subscription","kind":12,"name":"select_active"},{"kind":12,"containerName":"Founder::Case::Subscription","line":93,"name":"id"},{"line":93,"kind":12,"containerName":"Founder::Case::Subscription","name":"id"},{"kind":12,"line":94,"name":"ok"},{"kind":12,"line":95,"name":"ok"},{"line":95,"kind":12,"containerName":"Founder::Case::Subscription","name":"period"},{"name":"ok","kind":12,"line":96},{"containerName":"Founder::Case::Subscription","kind":12,"line":96,"name":"custom_price"},{"kind":12,"line":97,"name":"_check_defalt_sub_params"},{"line":100,"containerName":"Test::Payment","kind":12,"name":"Founder"},{"containerName":"Founder::Case::Subscription","kind":12,"line":100,"name":"init"},{"name":"level_id","kind":12,"line":103},{"name":"id","line":103,"containerName":"Founder::Case::Subscription","kind":12},{"kind":12,"line":104,"name":"payment_type"},{"name":"payments","kind":12,"line":106},{"name":"notify_reject","line":107,"kind":12,"containerName":"Founder::Case::Subscription"},{"containerName":"Subscription","kind":12,"line":109,"name":"Founder"},{"name":"select_active","kind":12,"containerName":"Founder::Case::Subscription","line":109},{"line":109,"containerName":"Founder::Case::Subscription","kind":12,"name":"id"},{"name":"id","line":109,"containerName":"Founder::Case::Subscription","kind":12},{"name":"ok","line":110,"kind":12},{"line":113,"containerName":"Test::Payment","kind":12,"name":"Founder"},{"line":113,"kind":12,"containerName":"Founder::Case::Subscription","name":"init"},{"name":"level_id","kind":12,"line":116},{"kind":12,"containerName":"Founder::Case::Subscription","line":116,"name":"id"},{"line":117,"kind":12,"name":"payment_type"},{"name":"period","line":118,"kind":12},{"name":"price","kind":12,"line":119},{"line":119,"containerName":"Founder::Case::Subscription","kind":12,"name":"price"},{"kind":12,"line":121,"name":"payments"},{"kind":12,"containerName":"Founder::Case::Subscription","line":122,"name":"notify_paid"},{"name":"Founder","containerName":"Subscription","kind":12,"line":124},{"line":124,"kind":12,"containerName":"Founder::Case::Subscription","name":"select_active"},{"line":124,"kind":12,"containerName":"Founder::Case::Subscription","name":"id"},{"containerName":"Founder::Case::Subscription","kind":12,"line":124,"name":"id"},{"name":"ok","kind":12,"line":125},{"kind":12,"line":126,"name":"ok"},{"containerName":"Founder::Case::Subscription","kind":12,"line":126,"name":"period"},{"line":127,"kind":12,"name":"ok"},{"name":"custom_price","line":127,"containerName":"Founder::Case::Subscription","kind":12},{"name":"price","kind":12,"containerName":"Founder::Case::Subscription","line":127},{"kind":12,"line":128,"name":"_check_defalt_sub_params"},{"defintion":"sub","name":"_check_defalt_sub_params","line":131,"containerName":"Founder::Case::Subscription","kind":12,"children":[{"line":132,"containerName":"_check_defalt_sub_params","kind":13,"defintion":"my","name":"$sub"},{"line":132,"containerName":"_check_defalt_sub_params","kind":13,"name":"$level"},{"line":133,"containerName":"_check_defalt_sub_params","kind":13,"name":"$sub"},{"name":"$level","line":133,"kind":13,"containerName":"_check_defalt_sub_params"},{"defintion":"my","name":"$next_time","line":134,"kind":13,"containerName":"_check_defalt_sub_params"},{"name":"$sub","line":134,"kind":13,"containerName":"_check_defalt_sub_params"},{"name":"$sub","line":134,"containerName":"_check_defalt_sub_params","kind":13},{"kind":13,"containerName":"_check_defalt_sub_params","line":135,"name":"$sub"},{"name":"$next_time","containerName":"_check_defalt_sub_params","kind":13,"line":135},{"name":"$sub","containerName":"_check_defalt_sub_params","kind":13,"line":136},{"containerName":"_check_defalt_sub_params","kind":13,"line":136,"name":"$next_time"},{"name":"$sub","line":137,"kind":13,"containerName":"_check_defalt_sub_params"},{"name":"$sub","kind":13,"containerName":"_check_defalt_sub_params","line":138},{"line":139,"containerName":"_check_defalt_sub_params","kind":13,"name":"$sub"},{"line":140,"kind":13,"containerName":"_check_defalt_sub_params","name":"$sub"},{"line":141,"kind":13,"containerName":"_check_defalt_sub_params","name":"$sub"},{"defintion":"my","name":"$sub_payments","line":143,"containerName":"_check_defalt_sub_params","kind":13},{"line":143,"kind":13,"containerName":"_check_defalt_sub_params","name":"$sub"},{"defintion":"my","name":"$total_payments","line":144,"containerName":"_check_defalt_sub_params","kind":13},{"line":145,"kind":13,"containerName":"_check_defalt_sub_params","name":"$sub"},{"line":146,"kind":13,"containerName":"_check_defalt_sub_params","name":"$total_payments"},{"name":"$sub","kind":13,"containerName":"_check_defalt_sub_params","line":146},{"line":146,"kind":13,"containerName":"_check_defalt_sub_params","name":"$sub"},{"line":148,"kind":13,"containerName":"_check_defalt_sub_params","name":"$total_payments"},{"name":"$level","containerName":"_check_defalt_sub_params","kind":13,"line":148},{"name":"$sub","kind":13,"containerName":"_check_defalt_sub_params","line":148},{"kind":13,"containerName":"_check_defalt_sub_params","line":150,"name":"$sub_payments"},{"name":"$total_payments","line":150,"kind":13,"containerName":"_check_defalt_sub_params"}]},{"line":133,"kind":12,"name":"ok"},{"line":133,"containerName":"Founder::Case::Subscription","kind":12,"name":"level_id"},{"name":"id","line":133,"kind":12,"containerName":"Founder::Case::Subscription"},{"line":134,"kind":12,"name":"DateTime"},{"kind":12,"containerName":"Founder::Case::Subscription","line":134,"name":"from_epoch"},{"line":134,"kind":12,"name":"epoch"},{"name":"on_time","containerName":"Founder::Case::Subscription","kind":12,"line":134},{"name":"add","line":134,"kind":12,"containerName":"Founder::Case::Subscription"},{"line":134,"kind":12,"name":"days"},{"name":"period","line":134,"containerName":"Founder::Case::Subscription","kind":12},{"name":"epoch","line":134,"kind":12,"containerName":"Founder::Case::Subscription"},{"kind":12,"line":135,"name":"ok"},{"line":135,"kind":12,"containerName":"Founder::Case::Subscription","name":"next_pay_time"},{"name":"ok","kind":12,"line":136},{"kind":12,"containerName":"Founder::Case::Subscription","line":136,"name":"next_try_time"},{"kind":12,"line":137,"name":"ok"},{"line":137,"containerName":"Founder::Case::Subscription","kind":12,"name":"off_time"},{"name":"ok","line":138,"kind":12},{"name":"is_suspended","containerName":"Founder::Case::Subscription","kind":12,"line":138},{"name":"ok","kind":12,"line":139},{"name":"pay_locked","kind":12,"containerName":"Founder::Case::Subscription","line":139},{"name":"ok","line":140,"kind":12},{"name":"pay_retry_count","containerName":"Founder::Case::Subscription","kind":12,"line":140},{"name":"ok","line":141,"kind":12},{"name":"current_pay_id","containerName":"Founder::Case::Subscription","kind":12,"line":141},{"containerName":"Founder::Case::Subscription","kind":12,"line":143,"name":"payments"},{"containerName":"Founder::Case::Subscription","kind":12,"line":145,"name":"custom_price"},{"containerName":"Founder::Case::Subscription","kind":12,"line":146,"name":"custom_price"},{"line":146,"kind":12,"containerName":"Founder::Case::Subscription","name":"period"},{"name":"price","containerName":"Founder::Case::Subscription","kind":12,"line":148},{"line":148,"containerName":"Founder::Case::Subscription","kind":12,"name":"period"},{"name":"ok","kind":12,"line":150}]