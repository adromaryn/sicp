[{"kind":2,"line":0,"name":"Founder::Notification","defintion":1},{"line":2,"containerName":"","kind":2,"name":"strict"},{"kind":2,"containerName":"","line":3,"name":"warnings"},{"name":"utf8","containerName":"","kind":2,"line":4},{"name":"XS","kind":2,"containerName":"JSON","line":6},{"name":"TypeConstraints","containerName":"Mouse::Util","kind":2,"line":7},{"line":9,"kind":2,"containerName":"MR::ActiveRecordPg","name":"Type"},{"name":"ActiveRecordPg","kind":2,"containerName":"MR","line":10},{"name":"Log","containerName":"MR","kind":2,"line":11},{"name":"Config","containerName":"Founder","kind":2,"line":13},{"name":"Notification","line":14,"containerName":"Founder::Const","kind":2},{"name":"Event","line":15,"containerName":"Founder::Notification","kind":2},{"name":"Notify","line":16,"containerName":"Founder::TP","kind":2},{"kind":12,"line":18,"name":"db"},{"line":18,"kind":12,"containerName":"Config::db_pg","name":"Founder"},{"name":"table","line":19,"kind":12},{"name":"has_field","line":21,"kind":12},{"line":21,"kind":12,"name":"id"},{"kind":12,"line":21,"name":"is"},{"name":"isa","line":21,"kind":12},{"name":"primary_key","line":21,"kind":12},{"kind":12,"line":21,"name":"selector"},{"kind":12,"line":21,"name":"init_by_storage"},{"name":"required","line":21,"kind":12},{"kind":12,"line":22,"name":"has_field"},{"kind":12,"line":22,"name":"user_id"},{"line":22,"kind":12,"name":"is"},{"name":"isa","kind":12,"line":22},{"name":"required","kind":12,"line":22},{"name":"has_field","kind":12,"line":23},{"line":23,"kind":12,"name":"type"},{"name":"is","kind":12,"line":23},{"name":"isa","kind":12,"line":23},{"line":23,"kind":12,"name":"required"},{"name":"has_field","line":24,"kind":12},{"line":24,"kind":12,"name":"active"},{"line":24,"kind":12,"name":"is"},{"name":"isa","line":24,"kind":12},{"name":"default","kind":12,"line":24},{"kind":12,"line":25,"name":"has_field"},{"line":25,"kind":12,"name":"readed"},{"line":25,"kind":12,"name":"is"},{"kind":12,"line":25,"name":"isa"},{"name":"default","line":25,"kind":12},{"line":26,"kind":12,"name":"has_field"},{"name":"frozen","line":26,"kind":12},{"name":"is","line":26,"kind":12},{"name":"isa","kind":12,"line":26},{"kind":12,"line":26,"name":"default"},{"name":"has_field","line":27,"kind":12},{"kind":12,"line":27,"name":"data"},{"name":"is","line":27,"kind":12},{"kind":12,"line":27,"name":"isa"},{"line":27,"kind":12,"name":"required"},{"name":"has_field","line":28,"kind":12},{"kind":12,"line":28,"name":"transport_ok"},{"line":28,"kind":12,"name":"is"},{"line":28,"kind":12,"name":"isa"},{"name":"default","line":28,"kind":12},{"name":"has_field","line":29,"kind":12},{"line":29,"kind":12,"name":"create_time"},{"line":29,"kind":12,"name":"is"},{"name":"isa","kind":12,"line":29},{"name":"default","kind":12,"line":29},{"kind":12,"line":29,"name":"time"},{"kind":12,"line":31,"name":"has_index"},{"name":"user_active_type_idx","kind":12,"line":31},{"kind":12,"line":32,"name":"fields"},{"kind":12,"line":33,"name":"selector"},{"kind":12,"line":34,"name":"uniq"},{"name":"has_index_part","line":37,"kind":12},{"kind":12,"line":37,"name":"user_active_idx"},{"kind":12,"line":38,"name":"index"},{"kind":12,"line":39,"name":"count"},{"kind":12,"line":40,"name":"selector"},{"name":"uniq","kind":12,"line":41},{"name":"default_limit","line":42,"kind":12},{"name":"has_index_part","line":45,"kind":12},{"name":"user_idx","line":45,"kind":12},{"line":46,"kind":12,"name":"index"},{"name":"count","kind":12,"line":47},{"name":"selector","kind":12,"line":48},{"line":49,"kind":12,"name":"uniq"},{"name":"default_limit","line":50,"kind":12},{"name":"user","line":53,"kind":12},{"kind":12,"line":54,"name":"is"},{"name":"isa","line":55,"kind":12},{"name":"lazy","line":56,"kind":12},{"name":"default","line":57,"kind":12},{"line":58,"kind":13,"containerName":null,"defintion":"my","name":"$self"},{"containerName":"User","kind":12,"line":59,"name":"Founder"},{"name":"select_by_id","line":59,"containerName":"Founder::Notification","kind":12},{"name":"$self","line":59,"containerName":null,"kind":13},{"name":"user_id","kind":12,"containerName":"Founder::Notification","line":59},{"name":"class","kind":12,"line":63},{"name":"is","line":64,"kind":12},{"name":"isa","line":65,"kind":12},{"name":"lazy","kind":12,"line":66},{"kind":12,"line":67,"name":"default"},{"line":67,"kind":12,"containerName":"Const::Notification::TYPE_TO_CLASS","name":"Founder"},{"line":67,"children":[],"kind":12,"containerName":"Founder::Notification","defintion":"sub","name":"type"},{"name":"handles","kind":12,"line":68},{"kind":12,"line":71,"name":"has_query"},{"name":"_query_clean","kind":12,"line":71},{"name":"has_query","line":74,"kind":12},{"name":"_query_read","line":74,"kind":12},{"name":"has_query","line":76,"kind":12},{"line":76,"kind":12,"name":"_update_recent_notification"},{"name":"has_query","line":81,"kind":12},{"line":81,"kind":12,"name":"_freeze_by_id"},{"kind":12,"line":83,"name":"has_query"},{"line":83,"kind":12,"name":"_add_transport_ok"},{"name":"create","defintion":"sub","kind":12,"containerName":"Founder::Notification","children":[{"name":"$class","defintion":"my","kind":13,"containerName":"create","line":87},{"line":87,"kind":13,"containerName":"create","name":"$user_id"},{"name":"$n_obj","containerName":"create","kind":13,"line":87},{"name":"$n_obj","kind":13,"containerName":"create","line":88},{"containerName":"create","kind":13,"line":90,"name":"$data","defintion":"my"},{"line":90,"kind":13,"containerName":"create","name":"$n_obj"},{"name":"$type","defintion":"my","kind":13,"containerName":"create","line":91},{"containerName":"create","kind":13,"line":91,"name":"$n_obj"},{"defintion":"my","name":"$agg_period","line":92,"containerName":"create","kind":13},{"line":92,"kind":13,"containerName":"create","name":"$n_obj"},{"line":93,"kind":13,"containerName":"create","name":"$agg_period"},{"containerName":"create","kind":13,"line":94,"name":"$updated_id","defintion":"my"},{"name":"$class","line":94,"kind":13,"containerName":"create"},{"line":94,"kind":13,"containerName":"create","name":"$data"},{"kind":13,"containerName":"create","line":94,"name":"$user_id"},{"name":"$type","kind":13,"containerName":"create","line":94},{"name":"$agg_period","line":94,"kind":13,"containerName":"create"},{"name":"$updated_id","kind":13,"containerName":"create","line":95},{"kind":13,"containerName":"create","line":95,"name":"$updated_id"},{"name":"$notification","defintion":"my","containerName":"create","kind":13,"line":98},{"name":"$class","kind":13,"containerName":"create","line":98},{"name":"$user_id","kind":13,"containerName":"create","line":98},{"name":"$type","line":98,"kind":13,"containerName":"create"},{"name":"$data","line":98,"kind":13,"containerName":"create"},{"name":"$notification","line":99,"containerName":"create","kind":13},{"name":"$event_id","defintion":"my","kind":13,"containerName":"create","line":101},{"name":"$agg_period","kind":13,"containerName":"create","line":101},{"name":"$notification","line":101,"containerName":"create","kind":13},{"name":"$event_id","line":102,"containerName":"create","kind":13}],"line":86},{"containerName":"Founder::Notification","kind":12,"line":90,"name":"data"},{"containerName":"Founder::Notification","kind":12,"line":91,"name":"type"},{"containerName":"Founder::Notification","kind":12,"line":92,"name":"agg_period"},{"name":"_update_recent_notification","line":94,"containerName":"Founder::Notification","kind":12},{"name":"params","kind":12,"line":94},{"line":94,"containerName":"XS::encode_json","kind":12,"name":"JSON"},{"kind":12,"containerName":"Founder::Notification","line":98,"name":"new"},{"name":"user_id","kind":12,"line":98},{"line":98,"kind":12,"name":"type"},{"kind":12,"line":98,"name":"data"},{"name":"insert","line":99,"containerName":"Founder::Notification","kind":12},{"name":"Founder","line":101,"containerName":"TP::Notify","kind":12},{"containerName":"Founder::Notification","kind":12,"line":101,"name":"AddOnTime"},{"name":"notification_id","kind":12,"line":101},{"name":"id","kind":12,"containerName":"Founder::Notification","line":101},{"name":"delete","defintion":"sub","children":[{"containerName":"delete","kind":13,"line":106,"name":"$self","defintion":"my"},{"name":"%opts","containerName":"delete","kind":13,"line":106},{"kind":13,"containerName":"delete","line":107,"name":"$opts"},{"name":"$self","line":108,"containerName":"delete","kind":13},{"line":111,"containerName":"delete","kind":13,"name":"$self"},{"name":"$self","line":112,"kind":13,"containerName":"delete"},{"name":"$self","containerName":"delete","kind":13,"line":113},{"containerName":"delete","kind":13,"line":114,"name":"$self"},{"line":114,"kind":13,"containerName":"delete","name":"$self"}],"kind":12,"containerName":"Founder::Notification","line":105},{"name":"force","kind":12,"line":107},{"name":"Founder","line":107,"containerName":"Config","kind":12},{"name":"get","kind":12,"containerName":"Founder::Notification","line":107},{"name":"SUPER","kind":12,"containerName":"delete","line":108},{"name":"active","line":111,"kind":12,"containerName":"Founder::Notification"},{"containerName":"Founder::Notification","kind":12,"line":112,"name":"create_time"},{"line":113,"containerName":"Founder::Notification","kind":12,"name":"update"},{"line":114,"containerName":"Founder::Notification","kind":12,"name":"_query_clean"},{"line":114,"kind":12,"name":"params"},{"name":"user_id","line":114,"kind":12,"containerName":"Founder::Notification"},{"name":"Founder","containerName":"Config","kind":12,"line":114},{"line":114,"containerName":"Founder::Notification","kind":12,"name":"get"},{"children":[{"defintion":"my","name":"$class","line":119,"kind":13,"containerName":"read"},{"name":"$user_id","line":119,"kind":13,"containerName":"read"},{"name":"$ids","line":119,"kind":13,"containerName":"read"},{"name":"$class","kind":13,"containerName":"read","line":120},{"name":"$user_id","kind":13,"containerName":"read","line":120},{"line":120,"containerName":"read","kind":13,"name":"$ids"}],"containerName":"Founder::Notification","kind":12,"line":118,"name":"read","defintion":"sub"},{"kind":12,"containerName":"Founder::Notification","line":120,"name":"_query_read"},{"kind":12,"line":120,"name":"params"},{"kind":12,"line":120,"name":"params_in"},{"children":[{"name":"$self","defintion":"my","containerName":"default_allowed_transports","kind":13,"line":124},{"name":"$type","defintion":"my","kind":13,"containerName":"default_allowed_transports","line":125},{"line":125,"containerName":"default_allowed_transports","kind":13,"name":"$self"},{"name":"$self","line":126,"containerName":"default_allowed_transports","kind":13},{"containerName":"default_allowed_transports","kind":13,"line":126,"name":"$type"}],"kind":12,"containerName":"Founder::Notification","line":123,"name":"default_allowed_transports","defintion":"sub"},{"kind":12,"containerName":"Founder::Notification","line":125,"name":"type"},{"line":126,"containerName":"Founder::Notification","kind":12,"name":"get_default_allowed_transports_for_type"},{"defintion":"sub","name":"get_default_allowed_transports_for_type","line":129,"children":[{"containerName":"get_default_allowed_transports_for_type","kind":13,"line":130,"name":"$class","defintion":"my"},{"line":130,"kind":13,"containerName":"get_default_allowed_transports_for_type","name":"$type"},{"defintion":"my","name":"@allowed_transports","line":131,"containerName":"get_default_allowed_transports_for_type","kind":13},{"name":"@allowed_transports","line":132,"containerName":"get_default_allowed_transports_for_type","kind":13},{"kind":13,"containerName":"get_default_allowed_transports_for_type","line":132,"name":"@allowed_transports"},{"name":"$t","defintion":"my","kind":13,"containerName":"get_default_allowed_transports_for_type","line":135},{"name":"@allowed_transports","kind":13,"containerName":"get_default_allowed_transports_for_type","line":135},{"containerName":"get_default_allowed_transports_for_type","kind":13,"line":136,"name":"$t"},{"line":138,"kind":13,"containerName":"get_default_allowed_transports_for_type","name":"@allowed_transports"},{"kind":13,"containerName":"get_default_allowed_transports_for_type","line":138,"name":"@allowed_transports"},{"line":139,"kind":13,"containerName":"get_default_allowed_transports_for_type","name":"@allowed_transports"},{"kind":13,"containerName":"get_default_allowed_transports_for_type","line":140,"name":"@allowed_transports"}],"kind":12,"containerName":"Founder::Notification"},{"line":131,"kind":12,"containerName":"Config","name":"Founder"},{"name":"get","line":131,"containerName":"Founder::Notification","kind":12},{"name":"Founder","kind":12,"containerName":"Config","line":132},{"line":132,"kind":12,"containerName":"Founder::Notification","name":"get"},{"name":"log_error","kind":12,"line":136},{"kind":12,"containerName":"Const::Notification::TRANSPORT_TO_CLASS","line":136,"name":"Founder"},{"kind":12,"containerName":"Const::Notification::TRANSPORT_TO_CLASS","line":138,"name":"Founder"},{"name":"log_debug1","kind":12,"line":139},{"defintion":"sub","name":"get_transports_to_send","line":143,"children":[{"containerName":"get_transports_to_send","kind":13,"line":144,"name":"$self","defintion":"my"},{"defintion":"my","name":"@transports","line":145,"kind":13,"containerName":"get_transports_to_send"},{"name":"$self","line":145,"containerName":"get_transports_to_send","kind":13},{"defintion":"my","name":"$settings_switch","line":146,"kind":13,"containerName":"get_transports_to_send"},{"line":146,"containerName":"get_transports_to_send","kind":13,"name":"$self"},{"name":"$settings_switch","containerName":"get_transports_to_send","kind":13,"line":147},{"line":148,"kind":13,"containerName":"get_transports_to_send","defintion":"my","name":"$user_settings"},{"kind":13,"containerName":"get_transports_to_send","line":148,"name":"$self"},{"name":"$user_settings","kind":13,"containerName":"get_transports_to_send","line":149},{"defintion":"my","name":"$settings_for_type","line":150,"containerName":"get_transports_to_send","kind":13},{"line":150,"kind":13,"containerName":"get_transports_to_send","name":"$user_settings"},{"kind":13,"containerName":"get_transports_to_send","line":150,"name":"$settings_switch"},{"line":151,"kind":13,"containerName":"get_transports_to_send","name":"$self"},{"line":151,"containerName":"get_transports_to_send","kind":13,"name":"$self"},{"name":"$settings_for_type","containerName":"get_transports_to_send","kind":13,"line":151},{"name":"@transports","containerName":"get_transports_to_send","kind":13,"line":152},{"name":"$settings_for_type","kind":13,"containerName":"get_transports_to_send","line":152},{"name":"@transports","line":152,"kind":13,"containerName":"get_transports_to_send"},{"name":"@transports","line":153,"containerName":"get_transports_to_send","kind":13},{"name":"@transports","line":154,"containerName":"get_transports_to_send","kind":13},{"line":154,"containerName":"get_transports_to_send","kind":13,"name":"$self"},{"name":"@transports","kind":13,"containerName":"get_transports_to_send","line":154},{"kind":13,"containerName":"get_transports_to_send","line":155,"name":"@transports"},{"name":"$self","kind":13,"containerName":"get_transports_to_send","line":155},{"name":"@transports","line":157,"kind":13,"containerName":"get_transports_to_send"},{"line":158,"kind":13,"containerName":"get_transports_to_send","name":"@transports"}],"containerName":"Founder::Notification","kind":12},{"containerName":"Founder::Notification","kind":12,"line":145,"name":"default_allowed_transports"},{"name":"get_settings_switch","kind":12,"containerName":"Founder::Notification","line":146},{"containerName":"Notification::UserSettings","kind":12,"line":148,"name":"Founder"},{"name":"select_by_user_id","line":148,"containerName":"Founder::Notification","kind":12},{"containerName":"Founder::Notification","kind":12,"line":148,"name":"user_id"},{"containerName":"Founder::Notification","kind":12,"line":150,"name":"get_by_type"},{"name":"log_info","line":151,"kind":12},{"containerName":"Founder::Notification","kind":12,"line":151,"name":"user_id"},{"name":"type","line":151,"containerName":"Founder::Notification","kind":12},{"kind":12,"line":153,"name":"log_debug1"},{"name":"transport_ok","line":154,"kind":12,"containerName":"Founder::Notification"},{"line":155,"kind":12,"name":"log_debug1"},{"name":"transport_ok","kind":12,"containerName":"Founder::Notification","line":155},{"name":"log_info","line":157,"kind":12},{"line":158,"containerName":"Const::Notification::TRANSPORT_TO_CLASS","kind":12,"name":"Founder"},{"defintion":"sub","name":"freeze_id","line":161,"containerName":"Founder::Notification","kind":12,"children":[{"kind":13,"containerName":"freeze_id","line":162,"name":"$class","defintion":"my"},{"name":"$id","containerName":"freeze_id","kind":13,"line":162},{"name":"$class","kind":13,"containerName":"freeze_id","line":163},{"name":"$id","containerName":"freeze_id","kind":13,"line":163}]},{"line":163,"containerName":"Founder::Notification","kind":12,"name":"_freeze_by_id"},{"kind":12,"line":163,"name":"params"},{"line":166,"children":[{"line":167,"kind":13,"containerName":"add_transport_ok","defintion":"my","name":"$self"},{"name":"$transport","line":167,"containerName":"add_transport_ok","kind":13},{"name":"$self","line":168,"kind":13,"containerName":"add_transport_ok"},{"name":"$self","kind":13,"containerName":"add_transport_ok","line":168},{"line":169,"containerName":"add_transport_ok","kind":13,"name":"$self"},{"name":"$transport","kind":13,"containerName":"add_transport_ok","line":169}],"containerName":"Founder::Notification","kind":12,"defintion":"sub","name":"add_transport_ok"},{"name":"_add_transport_ok","containerName":"Founder::Notification","kind":12,"line":168},{"name":"params","kind":12,"line":168},{"line":168,"containerName":"Founder::Notification","kind":12,"name":"id"},{"name":"transport_ok","kind":12,"containerName":"Founder::Notification","line":169},{"line":172,"kind":12,"containerName":"ActiveRecordPg","name":"MR"},{"line":173,"kind":12,"containerName":"Founder::Notification","name":"meta"},{"name":"make_immutable","line":173,"kind":12,"containerName":"Founder::Notification"}]