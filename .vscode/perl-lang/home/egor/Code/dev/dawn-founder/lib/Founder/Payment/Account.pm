[{"defintion":1,"kind":2,"name":"Founder::Payment::Account","line":0},{"containerName":"","kind":2,"line":2,"name":"strict"},{"containerName":"","kind":2,"name":"warnings","line":3},{"containerName":"","kind":2,"line":4,"name":"utf8"},{"line":6,"name":"HTTP","kind":2,"containerName":"AnyEvent"},{"kind":2,"line":7,"name":"SHA","containerName":"Digest"},{"containerName":"URI::Escape","kind":2,"line":8,"name":"XS"},{"kind":2,"line":9,"name":"XS","containerName":"JSON"},{"containerName":"MR","kind":2,"line":11,"name":"Log"},{"kind":2,"line":12,"name":"ActiveRecordPg","containerName":"MR"},{"containerName":"MR::ActiveRecordPg","kind":2,"line":13,"name":"Type"},{"kind":2,"name":"Config","line":15,"containerName":"Founder"},{"containerName":"Founder::Const","name":"DA","line":16,"kind":2},{"kind":2,"name":"User","line":17,"containerName":"Founder"},{"containerName":"Founder","name":"DA","line":18,"kind":2},{"name":"Payout","line":19,"kind":2,"containerName":"Founder::Payment"},{"containerName":"Founder::TP","kind":2,"line":20,"name":"DaAccountToggle"},{"name":"db","line":22,"kind":12},{"kind":12,"line":22,"name":"Founder","containerName":"Config::db_pg"},{"line":23,"name":"table","kind":12},{"line":26,"name":"overload","kind":2,"containerName":""},{"line":27,"name":"fallback","kind":12},{"line":29,"name":"has_field","kind":12},{"kind":12,"line":29,"name":"user_id"},{"line":29,"name":"is","kind":12},{"kind":12,"line":29,"name":"isa"},{"kind":12,"line":29,"name":"selector"},{"kind":12,"line":29,"name":"primary_key"},{"name":"required","line":29,"kind":12},{"line":30,"name":"has_field","kind":12},{"line":30,"name":"da_user_id","kind":12},{"line":30,"name":"is","kind":12},{"name":"isa","line":30,"kind":12},{"kind":12,"line":31,"name":"has_field"},{"line":31,"name":"amount","kind":12},{"kind":12,"line":31,"name":"is"},{"line":31,"name":"isa","kind":12},{"kind":12,"name":"required","line":31},{"name":"default","line":31,"kind":12},{"line":32,"name":"has_field","kind":12},{"kind":12,"line":32,"name":"last_history_page"},{"kind":12,"name":"is","line":32},{"name":"isa","line":32,"kind":12},{"name":"required","line":32,"kind":12},{"kind":12,"line":32,"name":"default"},{"kind":12,"line":33,"name":"has_field"},{"line":33,"name":"history_count","kind":12},{"line":33,"name":"is","kind":12},{"kind":12,"name":"isa","line":33},{"kind":12,"name":"required","line":33},{"name":"default","line":33,"kind":12},{"name":"has_field","line":34,"kind":12},{"line":34,"name":"need_history_sync","kind":12},{"name":"is","line":34,"kind":12},{"kind":12,"line":34,"name":"isa"},{"line":34,"name":"required","kind":12},{"kind":12,"line":34,"name":"default"},{"kind":12,"line":35,"name":"has_field"},{"name":"is_active","line":35,"kind":12},{"kind":12,"line":35,"name":"is"},{"kind":12,"line":35,"name":"isa"},{"line":35,"name":"required","kind":12},{"kind":12,"name":"default","line":35},{"kind":12,"line":37,"name":"has_index"},{"kind":12,"name":"da_accounts_da_user_id_idx","line":37},{"kind":12,"line":38,"name":"fields"},{"name":"selector","line":39,"kind":12},{"kind":12,"line":40,"name":"uniq"},{"line":43,"name":"has_select_query","kind":12},{"kind":12,"line":43,"name":"_for_history_sync"},{"kind":12,"line":44,"name":"query"},{"line":45,"name":"bulk","kind":12},{"kind":12,"line":48,"name":"before"},{"line":48,"name":"insert","kind":12},{"line":49,"name":"$self","kind":13,"defintion":"my","containerName":null},{"containerName":null,"defintion":"my","name":"$result","line":50,"kind":13},{"name":"Founder","line":50,"kind":12,"containerName":"DA"},{"name":"signed_request","line":50,"kind":12,"containerName":"Founder::Payment::Account"},{"kind":12,"name":"main_currency","line":50},{"containerName":null,"kind":13,"name":"$result","line":51},{"kind":12,"line":51,"name":"is_success","containerName":"Founder::Payment::Account"},{"containerName":null,"kind":13,"name":"$self","line":52},{"kind":12,"line":52,"name":"da_user_id","containerName":"Founder::Payment::Account"},{"containerName":null,"line":52,"name":"$result","kind":13},{"line":52,"name":"data","kind":12,"containerName":"Founder::Payment::Account"},{"line":52,"name":"user_id","kind":12},{"line":55,"children":[{"containerName":"add_amount","defintion":"my","kind":13,"line":56,"name":"$self"},{"containerName":"add_amount","line":56,"name":"$payment","kind":13},{"kind":13,"line":57,"name":"$amount","defintion":"my","containerName":"add_amount"},{"name":"$payment","line":57,"kind":13,"containerName":"add_amount"},{"containerName":"add_amount","line":58,"name":"$record_id","kind":13,"defintion":"my"},{"line":58,"name":"$payment","kind":13,"containerName":"add_amount"},{"containerName":"add_amount","kind":13,"line":59,"name":"$payment"},{"line":60,"name":"$amount","kind":13,"containerName":"add_amount"},{"containerName":"add_amount","kind":13,"line":62,"name":"$res","defintion":"my"},{"containerName":"add_amount","kind":13,"line":63,"name":"$record_id"},{"kind":13,"name":"$self","line":63,"containerName":"add_amount"},{"kind":13,"line":63,"name":"$amount","containerName":"add_amount"},{"line":64,"name":"$res","kind":13,"containerName":"add_amount"},{"containerName":"add_amount","name":"$res","line":65,"kind":13},{"line":66,"name":"$balance","kind":13,"defintion":"my","containerName":"add_amount"},{"containerName":"add_amount","name":"$res","line":66,"kind":13},{"containerName":"add_amount","name":"$self","line":67,"kind":13},{"containerName":"add_amount","line":67,"name":"$balance","kind":13},{"name":"$self","line":68,"kind":13,"containerName":"add_amount"},{"containerName":"add_amount","kind":13,"name":"$self","line":69},{"containerName":"add_amount","line":71,"name":"$res","kind":13},{"kind":13,"line":73,"name":"$res","containerName":"add_amount"}],"defintion":"sub","name":"add_amount","kind":12,"containerName":"Founder::Payment::Account"},{"kind":12,"line":57,"name":"amount_wo_fee","containerName":"Founder::Payment::Account"},{"kind":12,"name":"id","line":58,"containerName":"Founder::Payment::Account"},{"containerName":"Founder::Payment::Account","line":59,"name":"is_chargeback","kind":12},{"kind":12,"name":"Founder","line":62,"containerName":"DA"},{"name":"signed_request","line":62,"kind":12,"containerName":"Founder::Payment::Account"},{"line":63,"name":"id","kind":12},{"name":"user_id","line":63,"kind":12},{"containerName":"Founder::Payment::Account","kind":12,"name":"da_user_id","line":63},{"line":63,"name":"amount","kind":12},{"line":63,"name":"currency","kind":12},{"kind":12,"name":"is_success","line":64,"containerName":"Founder::Payment::Account"},{"containerName":"Founder::Payment::Account","name":"data","line":65,"kind":12},{"name":"amount","line":65,"kind":12},{"containerName":"Founder::Payment::Account","kind":12,"line":66,"name":"data"},{"kind":12,"line":66,"name":"user_balance"},{"kind":12,"line":66,"name":"balance"},{"kind":12,"line":67,"name":"amount","containerName":"Founder::Payment::Account"},{"line":68,"name":"need_history_sync","kind":12,"containerName":"Founder::Payment::Account"},{"kind":12,"name":"update","line":69,"containerName":"Founder::Payment::Account"},{"kind":12,"line":71,"name":"log_error"},{"containerName":"Founder::Payment::Account","line":71,"name":"full_response","kind":12},{"containerName":"Founder::Payment::Account","name":"code","line":73,"kind":12},{"line":73,"name":"Founder","kind":12,"containerName":"Const::DA::PAYMENT_ALREADY_EXIST"},{"kind":12,"line":77,"name":"log_error"},{"containerName":"Founder::Payment::Account","defintion":"sub","name":"sync","kind":12,"line":81,"children":[{"line":82,"name":"$self","kind":13,"defintion":"my","containerName":"sync"},{"containerName":"sync","defintion":"my","name":"$res","line":83,"kind":13},{"containerName":"sync","name":"$self","line":83,"kind":13},{"kind":13,"name":"$res","line":84,"containerName":"sync"},{"containerName":"sync","line":85,"name":"$balance","kind":13,"defintion":"my"},{"kind":13,"line":85,"name":"$res","containerName":"sync"},{"containerName":"sync","name":"$balance","line":86,"kind":13},{"kind":13,"line":87,"name":"$self","containerName":"sync"},{"kind":13,"line":87,"name":"$balance","containerName":"sync"},{"containerName":"sync","kind":13,"line":88,"name":"$self"},{"line":88,"name":"$self","kind":13,"containerName":"sync"},{"line":89,"name":"$self","kind":13,"containerName":"sync"},{"containerName":"sync","line":92,"name":"$self","kind":13},{"containerName":"sync","name":"$self","line":93,"kind":13}]},{"containerName":"DA","kind":12,"line":83,"name":"Founder"},{"containerName":"Founder::Payment::Account","name":"signed_request","line":83,"kind":12},{"kind":12,"name":"user_id","line":83},{"containerName":"Founder::Payment::Account","kind":12,"line":83,"name":"da_user_id"},{"containerName":"Founder::Payment::Account","kind":12,"line":84,"name":"is_success"},{"line":85,"name":"currency","kind":12},{"containerName":"Founder::Payment::Account","name":"data","line":85,"kind":12},{"kind":12,"line":86,"name":"balance"},{"containerName":"Founder::Payment::Account","line":87,"name":"amount","kind":12},{"kind":12,"name":"balance","line":87},{"containerName":"Founder::Payment::Account","line":88,"name":"need_history_sync","kind":12},{"name":"amount","line":88,"kind":12,"containerName":"Founder::Payment::Account"},{"kind":12,"line":89,"name":"update","containerName":"Founder::Payment::Account"},{"kind":12,"line":92,"name":"log_error"},{"containerName":"Founder::Payment::Account","kind":12,"name":"da_user_id","line":93},{"containerName":"Config","kind":12,"line":93,"name":"Founder"},{"name":"get","line":93,"kind":12,"containerName":"Founder::Payment::Account"},{"containerName":"Const::DA::CONFIG","kind":12,"name":"Founder","line":93},{"kind":12,"name":"log_error","line":97},{"containerName":"Founder::Payment::Account","defintion":"sub","kind":12,"name":"on","children":[],"line":101},{"line":101,"name":"_switch","kind":12,"containerName":"Founder::Payment::Account"},{"children":[],"line":102,"containerName":"Founder::Payment::Account","defintion":"sub","kind":12,"name":"off"},{"kind":12,"line":102,"name":"_switch","containerName":"Founder::Payment::Account"},{"line":104,"children":[{"name":"$self","line":105,"kind":13,"defintion":"my","containerName":"_switch"},{"containerName":"_switch","name":"$is_active","line":105,"kind":13},{"containerName":"_switch","kind":13,"line":106,"name":"$self"},{"containerName":"_switch","kind":13,"name":"$is_active","line":106},{"line":107,"name":"$self","kind":13,"containerName":"_switch"},{"kind":13,"name":"$self","line":108,"containerName":"_switch"}],"containerName":"Founder::Payment::Account","name":"_switch","kind":12,"defintion":"sub"},{"line":106,"name":"is_active","kind":12,"containerName":"Founder::Payment::Account"},{"containerName":"Founder::Payment::Account","kind":12,"line":107,"name":"update"},{"containerName":"TP::DaAccountToggle","line":108,"name":"Founder","kind":12},{"containerName":"Founder::Payment::Account","kind":12,"line":108,"name":"Add"},{"name":"user_id","line":108,"kind":12},{"containerName":"Founder::Payment::Account","line":108,"name":"user_id","kind":12},{"children":[{"containerName":"sync_payouts","defintion":"my","line":112,"name":"$self","kind":13},{"kind":13,"name":"$res","line":113,"defintion":"my","containerName":"sync_payouts"},{"containerName":"sync_payouts","kind":13,"line":113,"name":"$self"},{"name":"$res","line":114,"kind":13,"containerName":"sync_payouts"},{"containerName":"sync_payouts","defintion":"my","kind":13,"name":"%payouts","line":115},{"name":"$self","line":115,"kind":13,"containerName":"sync_payouts"},{"kind":13,"line":116,"name":"$item","defintion":"my","containerName":"sync_payouts"},{"containerName":"sync_payouts","name":"$res","line":116,"kind":13},{"containerName":"sync_payouts","name":"$payouts","line":117,"kind":13},{"containerName":"sync_payouts","line":117,"name":"$item","kind":13},{"containerName":"sync_payouts","defintion":"my","kind":13,"line":118,"name":"$res"},{"kind":13,"name":"$item","line":118,"containerName":"sync_payouts"},{"containerName":"sync_payouts","name":"$self","line":118,"kind":13},{"kind":13,"line":119,"name":"$item","containerName":"sync_payouts"}],"line":111,"containerName":"Founder::Payment::Account","defintion":"sub","kind":12,"name":"sync_payouts"},{"line":113,"name":"Founder","kind":12,"containerName":"DA"},{"kind":12,"line":113,"name":"signed_request","containerName":"Founder::Payment::Account"},{"line":113,"name":"user_id","kind":12},{"containerName":"Founder::Payment::Account","name":"da_user_id","line":113,"kind":12},{"line":114,"name":"is_success","kind":12,"containerName":"Founder::Payment::Account"},{"containerName":"Founder::Payment::Account","name":"id","line":115,"kind":12},{"containerName":"Payment::Payout","kind":12,"name":"Founder","line":115},{"containerName":"Founder::Payment::Account","kind":12,"name":"select_by_user_id","line":115},{"kind":12,"line":115,"name":"user_id","containerName":"Founder::Payment::Account"},{"containerName":"Founder::Payment::Account","name":"data","line":116,"kind":12},{"line":117,"name":"id","kind":12},{"kind":12,"name":"Founder","line":118,"containerName":"DA"},{"containerName":"Founder::Payment::Account","kind":12,"line":118,"name":"signed_request"},{"kind":12,"name":"id","line":118},{"kind":12,"name":"user_id","line":118},{"containerName":"Founder::Payment::Account","kind":12,"line":118,"name":"da_user_id"},{"name":"log_warn","line":119,"kind":12},{"line":127,"children":[{"kind":13,"line":128,"name":"$class","defintion":"my","containerName":"select_for_history_sync"},{"line":128,"name":"$limit","kind":13,"containerName":"select_for_history_sync"},{"kind":13,"name":"$last_id","line":128,"containerName":"select_for_history_sync"},{"containerName":"select_for_history_sync","kind":13,"name":"$limit","line":129},{"kind":13,"name":"$last_id","line":130,"containerName":"select_for_history_sync"},{"kind":13,"name":"$class","line":131,"containerName":"select_for_history_sync"},{"name":"$last_id","line":131,"kind":13,"containerName":"select_for_history_sync"},{"name":"$limit","line":131,"kind":13,"containerName":"select_for_history_sync"}],"defintion":"sub","name":"select_for_history_sync","kind":12,"containerName":"Founder::Payment::Account"},{"line":131,"name":"_for_history_sync","kind":12,"containerName":"Founder::Payment::Account"},{"kind":12,"line":131,"name":"params"},{"kind":12,"name":"MR","line":134,"containerName":"ActiveRecordPg"},{"kind":12,"name":"meta","line":135,"containerName":"Founder::Payment::Account"},{"name":"make_immutable","line":135,"kind":12,"containerName":"Founder::Payment::Account"}]