[{"name":"Founder::Post::Comment","defintion":1,"kind":2,"line":0},{"line":2,"containerName":"","kind":2,"name":"strict"},{"name":"warnings","containerName":"","kind":2,"line":3},{"line":4,"containerName":"","kind":2,"name":"utf8"},{"containerName":"JSON","kind":2,"line":6,"name":"XS"},{"name":"Log","line":7,"kind":2,"containerName":"MR"},{"containerName":"UUID","kind":2,"line":8,"name":"Tiny"},{"name":"Type","containerName":"MR::ActiveRecordPg","kind":2,"line":10},{"kind":2,"containerName":"MR","line":11,"name":"ActiveRecordPg"},{"name":"User","line":12,"kind":2,"containerName":"Founder"},{"name":"Post","kind":2,"containerName":"Founder","line":13},{"kind":2,"containerName":"Founder","line":14,"name":"Config"},{"kind":2,"containerName":"Founder","line":15,"name":"Const"},{"name":"MediaLink","containerName":"Founder","kind":2,"line":16},{"name":"ContainerRole","kind":2,"containerName":"Founder::MediaLink","line":17},{"line":19,"kind":12,"name":"with"},{"name":"db","line":21,"kind":12},{"line":21,"containerName":"Config::db_pg","kind":12,"name":"Founder"},{"line":22,"kind":12,"name":"table"},{"kind":13,"containerName":null,"line":24,"name":"$json","defintion":"my"},{"name":"JSON","containerName":"XS","kind":12,"line":24},{"line":24,"kind":12,"containerName":"Founder::Post::Comment","name":"new"},{"kind":12,"line":26,"name":"has_field"},{"name":"id","line":26,"kind":12},{"name":"is","line":26,"kind":12},{"line":26,"kind":12,"name":"isa"},{"kind":12,"line":26,"name":"primary_key"},{"name":"selector","kind":12,"line":26},{"name":"default","line":26,"kind":12},{"kind":12,"line":26,"name":"create_UUID_as_string"},{"name":"UUID_V4","kind":12,"line":26},{"name":"required","kind":12,"line":26},{"name":"has_field","kind":12,"line":27},{"kind":12,"line":27,"name":"user_id"},{"kind":12,"line":27,"name":"is"},{"name":"isa","line":27,"kind":12},{"name":"required","line":27,"kind":12},{"kind":12,"line":28,"name":"has_field"},{"name":"post_id","kind":12,"line":28},{"kind":12,"line":28,"name":"is"},{"name":"isa","kind":12,"line":28},{"line":28,"kind":12,"name":"required"},{"name":"has_field","line":29,"kind":12},{"name":"reply_id","line":29,"kind":12},{"name":"is","kind":12,"line":29},{"kind":12,"line":29,"name":"isa"},{"name":"has_field","line":30,"kind":12},{"kind":12,"line":30,"name":"data"},{"line":30,"kind":12,"name":"is"},{"line":30,"kind":12,"name":"isa"},{"name":"required","line":30,"kind":12},{"name":"has_field","kind":12,"line":31},{"name":"created_at","kind":12,"line":31},{"name":"is","line":31,"kind":12},{"kind":12,"line":31,"name":"isa"},{"name":"default","kind":12,"line":31},{"name":"required","line":31,"kind":12},{"line":32,"kind":12,"name":"has_field"},{"name":"updated_at","kind":12,"line":32},{"name":"is","line":32,"kind":12},{"name":"isa","line":32,"kind":12},{"kind":12,"line":32,"name":"default"},{"name":"required","kind":12,"line":32},{"name":"has_field","kind":12,"line":33},{"name":"deleted_at","line":33,"kind":12},{"name":"is","kind":12,"line":33},{"name":"isa","line":33,"kind":12},{"line":33,"kind":12,"name":"required"},{"line":35,"kind":12,"name":"has_field"},{"line":35,"kind":12,"name":"status"},{"kind":12,"line":36,"name":"is"},{"line":37,"kind":12,"name":"isa"},{"kind":12,"line":38,"name":"serialize"},{"line":40,"containerName":"Const::Blog::COMMENT_ACTIVE","kind":12,"name":"Founder"},{"line":42,"kind":12,"containerName":"Const::Blog::COMMENT_DELETED_BY_BLOGGER","name":"Founder"},{"kind":12,"containerName":"Const::Blog::COMMENT_DELETED_BY_COMMENTATOR","line":44,"name":"Founder"},{"kind":12,"containerName":"Const::Blog::COMMENT_BLOCK","line":46,"name":"Founder"},{"name":"deserialize","kind":12,"line":50},{"name":"Founder","line":51,"kind":12,"containerName":"Const::Blog::COMMENT_ACTIVE"},{"line":53,"kind":12,"containerName":"Const::Blog::COMMENT_DELETED_BY_BLOGGER","name":"Founder"},{"name":"Founder","containerName":"Const::Blog::COMMENT_DELETED_BY_COMMENTATOR","kind":12,"line":55},{"containerName":"Const::Blog::COMMENT_BLOCK","kind":12,"line":57,"name":"Founder"},{"name":"default","line":62,"kind":12},{"line":65,"kind":12,"name":"has_index"},{"kind":12,"line":65,"name":"post_comments_created_idx"},{"name":"fields","line":66,"kind":12},{"kind":12,"line":67,"name":"order"},{"line":68,"kind":12,"name":"field"},{"name":"order","line":68,"kind":12},{"kind":12,"line":69,"name":"field"},{"line":69,"kind":12,"name":"order"},{"kind":12,"line":70,"name":"field"},{"name":"order","line":70,"kind":12},{"line":74,"kind":12,"name":"has_index_part"},{"line":75,"kind":12,"name":"index"},{"name":"selector","kind":12,"line":76},{"name":"count","kind":12,"line":77},{"name":"uniq","line":78,"kind":12},{"kind":12,"line":79,"name":"default_limit"},{"kind":12,"line":83,"name":"url"},{"name":"is","kind":12,"line":84},{"kind":12,"line":85,"name":"isa"},{"line":86,"kind":12,"name":"lazy"},{"name":"builder","line":87,"kind":12},{"name":"Founder","kind":12,"containerName":"Config","line":87},{"kind":12,"containerName":"Founder::Post::Comment","children":[],"line":87,"name":"get","defintion":"sub"},{"kind":12,"containerName":"Const::POST_CONFIG","line":87,"name":"Founder"},{"line":87,"kind":12,"containerName":"Founder::Post::Comment","name":"post_id"},{"name":"id","line":87,"containerName":"Founder::Post::Comment","kind":12},{"name":"media_data","line":90,"kind":12},{"name":"is","kind":12,"line":91},{"name":"isa","kind":12,"line":92},{"kind":12,"line":93,"name":"lazy"},{"name":"builder","kind":12,"line":94},{"line":94,"containerName":"MediaData","kind":12,"name":"Founder"},{"line":94,"children":[],"kind":12,"containerName":"Founder::Post::Comment","defintion":"sub","name":"Load"},{"kind":12,"containerName":"Founder::Post::Comment","line":94,"name":"data"},{"line":95,"kind":12,"name":"trigger"},{"defintion":"sub","name":"update_data","line":95,"kind":12,"containerName":"Founder::Post::Comment","children":[]},{"name":"user","line":98,"kind":12},{"line":99,"kind":12,"name":"is"},{"name":"isa","line":100,"kind":12},{"line":101,"kind":12,"name":"lazy"},{"name":"builder","line":102,"kind":12},{"kind":12,"containerName":"User","line":103,"name":"Founder"},{"containerName":"Founder::Post::Comment","kind":12,"children":[],"line":102,"name":"select_by_id","defintion":"sub"},{"name":"user_id","line":103,"containerName":"Founder::Post::Comment","kind":12},{"name":"post","kind":12,"line":107},{"name":"is","kind":12,"line":108},{"name":"isa","kind":12,"line":109},{"line":110,"kind":12,"name":"lazy"},{"name":"builder","kind":12,"line":111},{"kind":12,"containerName":"Post","line":112,"name":"Founder"},{"containerName":"Founder::Post::Comment","kind":12,"children":[],"line":111,"name":"select_by_id","defintion":"sub"},{"name":"post_id","kind":12,"containerName":"Founder::Post::Comment","line":112},{"line":116,"kind":12,"name":"has_query"},{"line":116,"kind":12,"name":"_delete_by_post"},{"name":"has_query","line":117,"kind":12},{"kind":12,"line":117,"name":"_delete_by_user"},{"kind":12,"line":118,"name":"has_query"},{"line":118,"kind":12,"name":"_query_by_post"},{"kind":12,"line":119,"name":"query"},{"kind":12,"line":122,"name":"bulk"},{"name":"object_result","kind":12,"line":123},{"name":"before","line":126,"kind":12},{"defintion":"sub","name":"_set_media_link","line":126,"kind":12,"containerName":"Founder::Post::Comment","children":[]},{"name":"before","line":130,"kind":12},{"line":130,"children":[],"containerName":"Founder::Post::Comment","kind":12,"defintion":"sub","name":"updated_at"},{"name":"_update_media_link","line":132,"containerName":"Founder::Post::Comment","kind":12},{"name":"super_update","defintion":"sub","containerName":"Founder::Post::Comment","kind":12,"children":[],"line":136},{"line":137,"kind":12,"containerName":"update","name":"SUPER"},{"name":"BUILDARGS","defintion":"sub","children":[{"line":141,"kind":13,"containerName":"BUILDARGS","defintion":"my","name":"$self"},{"kind":13,"containerName":"BUILDARGS","line":141,"name":"%args"},{"name":"$args","line":142,"kind":13,"containerName":"BUILDARGS"},{"line":143,"containerName":"BUILDARGS","kind":13,"name":"$args"},{"name":"$args","kind":13,"containerName":"BUILDARGS","line":143},{"name":"%args","kind":13,"containerName":"BUILDARGS","line":145}],"containerName":"Founder::Post::Comment","kind":12,"line":140},{"line":142,"kind":12,"name":"data"},{"kind":12,"line":143,"name":"data"},{"containerName":"Founder::Post::Comment","kind":12,"line":143,"name":"to_hash"},{"kind":12,"line":143,"name":"media_data"},{"name":"update_data","defintion":"sub","containerName":"Founder::Post::Comment","kind":12,"children":[{"line":149,"containerName":"update_data","kind":13,"defintion":"my","name":"$self"},{"name":"$self","line":150,"containerName":"update_data","kind":13},{"line":150,"kind":13,"containerName":"update_data","name":"$self"},{"line":150,"kind":13,"containerName":"update_data","name":"$self"}],"line":148},{"name":"data","line":150,"kind":12,"containerName":"Founder::Post::Comment"},{"name":"Founder","containerName":"MediaData","kind":12,"line":150},{"containerName":"Founder::Post::Comment","kind":12,"line":150,"name":"merge_data"},{"kind":12,"containerName":"Founder::Post::Comment","line":150,"name":"data"},{"name":"media_data","kind":12,"containerName":"Founder::Post::Comment","line":150},{"containerName":"Founder::Post::Comment","kind":12,"children":[],"line":153,"name":"media_container_type","defintion":"sub"},{"containerName":"Founder::Post::Comment","kind":12,"children":[],"line":154,"name":"media_container_id","defintion":"sub"},{"name":"id","containerName":"Founder::Post::Comment","kind":12,"line":154},{"name":"media_container_data","defintion":"sub","containerName":"Founder::Post::Comment","kind":12,"children":[],"line":155},{"line":155,"kind":12,"containerName":"Founder::Post::Comment","name":"media_data"},{"defintion":"sub","name":"delete","line":157,"containerName":"Founder::Post::Comment","kind":12,"children":[{"containerName":"delete","kind":13,"line":158,"name":"$self","defintion":"my"},{"name":"%opts","kind":13,"containerName":"delete","line":158},{"line":159,"kind":13,"containerName":"delete","name":"$opts"},{"name":"$self","kind":13,"containerName":"delete","line":160},{"line":161,"kind":13,"containerName":"delete","name":"$self"},{"name":"$opts","kind":13,"containerName":"delete","line":163},{"containerName":"delete","kind":13,"line":164,"name":"$self"},{"containerName":"delete","kind":13,"line":165,"name":"$self"},{"name":"$opts","line":167,"containerName":"delete","kind":13},{"name":"$self","kind":13,"containerName":"delete","line":168},{"name":"$self","kind":13,"containerName":"delete","line":169},{"name":"$opts","kind":13,"containerName":"delete","line":171},{"name":"$self","containerName":"delete","kind":13,"line":172},{"name":"$self","line":173,"kind":13,"containerName":"delete"}]},{"line":159,"kind":12,"name":"force"},{"name":"_clean_media_link","line":160,"kind":12,"containerName":"Founder::Post::Comment"},{"line":161,"containerName":"delete","kind":12,"name":"SUPER"},{"name":"moderator","kind":12,"line":163},{"name":"status","kind":12,"containerName":"Founder::Post::Comment","line":164},{"line":165,"kind":12,"containerName":"Founder::Post::Comment","name":"update"},{"kind":12,"line":167,"name":"blogger"},{"line":168,"kind":12,"containerName":"Founder::Post::Comment","name":"status"},{"name":"update","line":169,"kind":12,"containerName":"Founder::Post::Comment"},{"kind":12,"line":171,"name":"commentator"},{"name":"status","containerName":"Founder::Post::Comment","kind":12,"line":172},{"name":"update","line":173,"kind":12,"containerName":"Founder::Post::Comment"},{"line":178,"kind":12,"containerName":"Founder::Post::Comment","children":[{"line":179,"kind":13,"containerName":"restore","defintion":"my","name":"$self"},{"containerName":"restore","kind":13,"line":179,"name":"%opts"},{"containerName":"restore","kind":13,"line":180,"name":"$opts"},{"name":"$opts","kind":13,"containerName":"restore","line":180},{"line":181,"kind":13,"containerName":"restore","name":"$self"},{"name":"$self","line":182,"kind":13,"containerName":"restore"},{"containerName":"restore","kind":13,"line":184,"name":"$opts"},{"name":"$self","line":184,"kind":13,"containerName":"restore"},{"name":"$self","kind":13,"containerName":"restore","line":185},{"name":"$self","containerName":"restore","kind":13,"line":186},{"name":"$opts","containerName":"restore","kind":13,"line":188},{"kind":13,"containerName":"restore","line":188,"name":"$self"},{"name":"$self","kind":13,"containerName":"restore","line":189},{"line":190,"kind":13,"containerName":"restore","name":"$self"}],"defintion":"sub","name":"restore"},{"name":"force","line":180,"kind":12},{"name":"moderator","kind":12,"line":180},{"name":"status","line":181,"kind":12,"containerName":"Founder::Post::Comment"},{"line":182,"containerName":"Founder::Post::Comment","kind":12,"name":"update"},{"kind":12,"line":184,"name":"blogger"},{"containerName":"Founder::Post::Comment","kind":12,"line":184,"name":"status"},{"name":"status","kind":12,"containerName":"Founder::Post::Comment","line":185},{"name":"update","line":186,"containerName":"Founder::Post::Comment","kind":12},{"name":"commentator","kind":12,"line":188},{"line":188,"containerName":"Founder::Post::Comment","kind":12,"name":"status"},{"line":189,"kind":12,"containerName":"Founder::Post::Comment","name":"status"},{"containerName":"Founder::Post::Comment","kind":12,"line":190,"name":"update"},{"containerName":"Founder::Post::Comment","kind":12,"children":[],"line":195,"name":"blocked","defintion":"sub"},{"name":"status","line":195,"kind":12,"containerName":"Founder::Post::Comment"},{"kind":12,"containerName":"Founder::Post::Comment","children":[{"containerName":"delete_by_post","kind":13,"line":199,"name":"$class","defintion":"my"},{"name":"$post_id","containerName":"delete_by_post","kind":13,"line":199},{"defintion":"my","name":"$ids","line":200,"containerName":"delete_by_post","kind":13},{"name":"$class","kind":13,"containerName":"delete_by_post","line":200},{"containerName":"delete_by_post","kind":13,"line":200,"name":"$post_id"},{"line":201,"kind":13,"containerName":"delete_by_post","defintion":"my","name":"$id"},{"name":"$ids","kind":13,"containerName":"delete_by_post","line":201},{"defintion":"my","name":"$media_ids","line":202,"kind":13,"containerName":"delete_by_post"},{"containerName":"delete_by_post","kind":13,"line":202,"name":"$id"}],"line":198,"name":"delete_by_post","defintion":"sub"},{"line":200,"containerName":"Founder::Post::Comment","kind":12,"name":"_delete_by_post"},{"line":200,"kind":12,"name":"params"},{"name":"Founder","kind":12,"containerName":"MediaLink","line":202},{"name":"clean_for_container","containerName":"Founder::Post::Comment","kind":12,"line":202},{"containerName":"Founder::Post::Comment","kind":12,"children":[{"line":207,"containerName":"delete_by_user","kind":13,"defintion":"my","name":"$class"},{"line":207,"kind":13,"containerName":"delete_by_user","name":"$user_id"},{"name":"$class","line":208,"containerName":"delete_by_user","kind":13},{"kind":13,"containerName":"delete_by_user","line":208,"name":"$user_id"}],"line":206,"name":"delete_by_user","defintion":"sub"},{"containerName":"Founder::Post::Comment","kind":12,"line":208,"name":"_delete_by_user"},{"kind":12,"line":208,"name":"params"},{"defintion":"sub","name":"select_by_post_bulk","line":211,"children":[{"name":"$class","defintion":"my","kind":13,"containerName":"select_by_post_bulk","line":212},{"line":212,"kind":13,"containerName":"select_by_post_bulk","name":"$posts_ids"},{"name":"$limit","kind":13,"containerName":"select_by_post_bulk","line":212},{"name":"$class","line":213,"containerName":"select_by_post_bulk","kind":13},{"containerName":"select_by_post_bulk","kind":13,"line":213,"name":"$limit"},{"containerName":"select_by_post_bulk","kind":13,"line":213,"name":"$posts_ids"}],"kind":12,"containerName":"Founder::Post::Comment"},{"name":"_query_by_post","line":213,"kind":12,"containerName":"Founder::Post::Comment"},{"line":213,"kind":12,"name":"params"},{"name":"Founder","kind":12,"containerName":"Const::Blog::COMMENT_ACTIVE","line":213},{"name":"params_in","line":213,"kind":12},{"children":[{"line":217,"containerName":"can_view","kind":13,"defintion":"my","name":"$self"},{"line":217,"kind":13,"containerName":"can_view","name":"$actor"},{"kind":13,"containerName":"can_view","line":218,"name":"$self"},{"name":"$actor","line":218,"kind":13,"containerName":"can_view"}],"kind":12,"containerName":"Founder::Post::Comment","line":216,"name":"can_view","defintion":"sub"},{"kind":12,"containerName":"Founder::Post::Comment","line":218,"name":"post"},{"line":218,"kind":12,"containerName":"Founder::Post::Comment","name":"can_view"},{"children":[{"containerName":"set_complete_data","kind":13,"line":222,"name":"$self","defintion":"my"},{"kind":13,"containerName":"set_complete_data","line":222,"name":"$media_link"},{"defintion":"my","name":"$class","line":223,"kind":13,"containerName":"set_complete_data"},{"kind":13,"containerName":"set_complete_data","line":224,"name":"$db","defintion":"my"},{"line":224,"kind":13,"containerName":"set_complete_data","name":"$class"},{"defintion":"my","name":"$db_class","line":225,"kind":13,"containerName":"set_complete_data"},{"name":"$class","kind":13,"containerName":"set_complete_data","line":225},{"containerName":"set_complete_data","kind":13,"line":226,"name":"$table","defintion":"my"},{"line":226,"containerName":"set_complete_data","kind":13,"name":"$class"},{"defintion":"my","name":"$conn_guard","line":227,"kind":13,"containerName":"set_complete_data"},{"name":"$db_class","line":227,"kind":13,"containerName":"set_complete_data"},{"line":227,"containerName":"set_complete_data","kind":13,"name":"$db"},{"containerName":"set_complete_data","kind":13,"line":228,"name":"$res","defintion":"my"},{"line":228,"kind":13,"containerName":"set_complete_data","name":"$db_class"},{"name":"$conn_guard","line":228,"kind":13,"containerName":"set_complete_data"},{"name":"$self","line":230,"kind":13,"containerName":"set_complete_data"},{"name":"$res","containerName":"set_complete_data","kind":13,"line":233},{"name":"$need_update","defintion":"my","containerName":"set_complete_data","kind":13,"line":234},{"line":235,"kind":13,"containerName":"set_complete_data","defintion":"my","name":"$data"},{"kind":13,"containerName":"set_complete_data","line":235,"name":"$json"},{"name":"$res","containerName":"set_complete_data","kind":13,"line":235},{"name":"$need_update","containerName":"set_complete_data","kind":13,"line":236},{"kind":13,"containerName":"set_complete_data","line":236,"name":"$class"},{"containerName":"set_complete_data","kind":13,"line":236,"name":"$data"},{"name":"$media_link","kind":13,"containerName":"set_complete_data","line":236},{"line":237,"kind":13,"containerName":"set_complete_data","name":"$need_update"},{"line":238,"kind":13,"containerName":"set_complete_data","name":"$db_class"},{"containerName":"set_complete_data","kind":13,"line":238,"name":"$conn_guard"},{"line":240,"containerName":"set_complete_data","kind":13,"name":"$self"},{"line":240,"containerName":"set_complete_data","kind":13,"name":"$json"},{"containerName":"set_complete_data","kind":13,"line":240,"name":"$data"},{"name":"$media_link","containerName":"set_complete_data","kind":13,"line":244},{"line":246,"kind":13,"containerName":"set_complete_data","name":"$db_class"},{"name":"$conn_guard","line":246,"kind":13,"containerName":"set_complete_data"}],"containerName":"Founder::Post::Comment","kind":12,"line":221,"name":"set_complete_data","defintion":"sub"},{"name":"meta","line":224,"containerName":"Founder::Post::Comment","kind":12},{"name":"db","containerName":"Founder::Post::Comment","kind":12,"line":224},{"kind":12,"containerName":"Founder::Post::Comment","line":225,"name":"meta"},{"name":"db_class","kind":12,"containerName":"Founder::Post::Comment","line":225},{"name":"meta","kind":12,"containerName":"Founder::Post::Comment","line":226},{"name":"table","line":226,"containerName":"Founder::Post::Comment","kind":12},{"name":"get_transaction_connect","containerName":"Founder::Post::Comment","kind":12,"line":227},{"containerName":"Founder::Post::Comment","kind":12,"line":228,"name":"selectall_arrayref"},{"name":"query","line":229,"kind":12},{"name":"params","line":230,"kind":12},{"name":"id","kind":12,"containerName":"Founder::Post::Comment","line":230},{"name":"deref_one_row_result","line":231,"kind":12},{"name":"decode","line":235,"containerName":"Founder::Post::Comment","kind":12},{"containerName":"Founder::Post::Comment","kind":12,"line":236,"name":"search_and_fill_media"},{"name":"selectall_arrayref","line":238,"kind":12,"containerName":"Founder::Post::Comment"},{"name":"query","kind":12,"line":239},{"line":240,"kind":12,"name":"params"},{"line":240,"containerName":"Founder::Post::Comment","kind":12,"name":"id"},{"kind":12,"containerName":"Founder::Post::Comment","line":240,"name":"encode"},{"kind":12,"line":244,"name":"log_error"},{"kind":12,"containerName":"Founder::Post::Comment","line":246,"name":"commit_transaction"},{"name":"MR","line":249,"kind":12,"containerName":"ActiveRecordPg"},{"name":"meta","line":250,"kind":12,"containerName":"Founder::Post::Comment"},{"name":"make_immutable","containerName":"Founder::Post::Comment","kind":12,"line":250}]