[{"defintion":1,"name":"Founder::Stat::Logger","line":0,"kind":2},{"name":"strict","line":2,"kind":2,"containerName":""},{"kind":2,"name":"warnings","line":3,"containerName":""},{"line":4,"name":"utf8","kind":2,"containerName":""},{"containerName":"","line":6,"name":"Exporter","kind":2},{"kind":13,"name":"@EXPORT","line":7,"defintion":"our","containerName":"Founder::Stat::Logger"},{"kind":2,"name":"Encode","line":8,"containerName":""},{"containerName":"MR","line":10,"name":"Log","kind":2},{"containerName":"MR::Clickhouse","kind":2,"name":"Client","line":11},{"containerName":"Founder","kind":2,"line":13,"name":"Config"},{"containerName":"Founder::TP","name":"BlogStatAggregate","line":14,"kind":2},{"kind":2,"line":15,"name":"Target","containerName":"Founder::Stat::OneLink"},{"containerName":"Founder::Stat::OneLink::Target","kind":2,"line":16,"name":"Config"},{"line":17,"name":"Util","kind":2,"containerName":"Founder::Stat"},{"children":[{"containerName":"send_stat","defintion":"my","name":"$action_readable","line":40,"kind":13},{"containerName":"send_stat","line":40,"name":"$context","kind":13},{"containerName":"send_stat","name":"$opts","line":40,"kind":13},{"kind":13,"line":41,"name":"$action","defintion":"my","containerName":"send_stat"},{"kind":13,"line":41,"name":"$action_readable","containerName":"send_stat"},{"line":42,"name":"$action","kind":13,"containerName":"send_stat"},{"defintion":"my","kind":13,"line":43,"name":"%params","containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":43,"name":"$action"},{"containerName":"send_stat","kind":13,"name":"%params","line":44},{"containerName":"send_stat","line":44,"name":"$context","kind":13},{"name":"$context","line":44,"kind":13,"containerName":"send_stat"},{"defintion":"my","kind":13,"line":45,"name":"$table_alias","containerName":"send_stat"},{"kind":13,"line":45,"name":"$action","containerName":"send_stat"},{"name":"$success","line":46,"kind":13,"defintion":"my","containerName":"send_stat"},{"containerName":"send_stat","name":"$result","line":46,"kind":13},{"containerName":"send_stat","kind":13,"line":48,"name":"$table_alias"},{"name":"$table","line":49,"kind":13,"defintion":"my","containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":49,"name":"$table_alias"},{"line":50,"name":"$table","kind":13,"containerName":"send_stat"},{"name":"%params","line":52,"kind":13,"containerName":"send_stat"},{"kind":13,"line":52,"name":"$opts","containerName":"send_stat"},{"containerName":"send_stat","kind":13,"name":"$action","line":52},{"name":"$opts","line":52,"kind":13,"containerName":"send_stat"},{"name":"%params","line":53,"kind":13,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"name":"$table","line":53},{"containerName":"send_stat","kind":13,"line":54,"name":"$data","defintion":"my"},{"line":54,"name":"%params","kind":13,"containerName":"send_stat"},{"kind":13,"line":54,"name":"$table","containerName":"send_stat"},{"defintion":"my","kind":13,"line":55,"name":"$success","containerName":"send_stat"},{"name":"$result","line":55,"kind":13,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":56,"name":"$data"},{"containerName":"send_stat","name":"$table","line":57,"kind":13},{"containerName":"send_stat","defintion":"my","kind":13,"line":59,"name":"$categories"},{"kind":13,"name":"$categories","line":61,"containerName":"send_stat"},{"containerName":"send_stat","line":61,"name":"$table","kind":13},{"containerName":"send_stat","name":"$params","line":62,"kind":13},{"kind":13,"line":63,"name":"$params","containerName":"send_stat"},{"kind":13,"name":"$dwh","line":64,"defintion":"my","containerName":"send_stat"},{"containerName":"send_stat","line":65,"name":"$dwh","kind":13},{"name":"$table","line":65,"kind":13,"containerName":"send_stat"},{"name":"%params","line":65,"kind":13,"containerName":"send_stat"},{"kind":13,"name":"$result","line":68,"containerName":"send_stat"},{"line":69,"name":"$data","kind":13,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":71,"name":"$success"},{"containerName":"send_stat","kind":13,"name":"$one_link","line":74,"defintion":"my"},{"containerName":"send_stat","line":74,"name":"$action","kind":13},{"name":"$one_link","line":75,"kind":13,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"name":"$one_link","line":76},{"containerName":"send_stat","name":"$one_link","line":76,"kind":13},{"containerName":"send_stat","kind":13,"name":"$one_link","line":76},{"line":76,"name":"$one_link","kind":13,"containerName":"send_stat"},{"containerName":"send_stat","defintion":"my","name":"$target","line":77,"kind":13},{"line":77,"name":"$one_link","kind":13,"containerName":"send_stat"},{"defintion":"my","kind":13,"line":78,"name":"$ok","containerName":"send_stat"},{"containerName":"send_stat","kind":13,"name":"$target","line":78},{"containerName":"send_stat","name":"%params","line":78,"kind":13},{"containerName":"send_stat","kind":13,"line":79,"name":"$success"},{"containerName":"send_stat","kind":13,"name":"$ok","line":79},{"containerName":"send_stat","defintion":"my","kind":13,"line":83,"name":"$blog_aggr"},{"containerName":"send_stat","kind":13,"line":83,"name":"$action"},{"containerName":"send_stat","kind":13,"line":84,"name":"$blog_aggr"},{"containerName":"send_stat","defintion":"my","name":"$levels","line":85,"kind":13},{"containerName":"send_stat","line":85,"name":"$blog_aggr","kind":13},{"kind":13,"name":"$levels","line":86,"containerName":"send_stat"},{"kind":13,"name":"$levels","line":87,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":87,"name":"$levels"},{"containerName":"send_stat","kind":13,"name":"$levels","line":87},{"containerName":"send_stat","defintion":"my","kind":13,"name":"$l","line":88},{"containerName":"send_stat","kind":13,"line":88,"name":"$levels"},{"containerName":"send_stat","kind":13,"line":89,"name":"$params"},{"name":"$l","line":89,"kind":13,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"line":92,"name":"$blogger_id","defintion":"my"},{"containerName":"send_stat","kind":13,"line":92,"name":"$blog_aggr"},{"kind":13,"line":93,"name":"$params","containerName":"send_stat"},{"line":93,"name":"$blogger_id","kind":13,"containerName":"send_stat"},{"kind":13,"name":"$blogger_id","line":93,"containerName":"send_stat"},{"containerName":"send_stat","kind":13,"name":"$success","line":96}],"line":39,"containerName":"Founder::Stat::Logger","kind":12,"name":"send_stat","defintion":"sub"},{"name":"get_stat_event","line":41,"kind":12},{"name":"action","line":43,"kind":12},{"kind":12,"line":43,"name":"id"},{"name":"date","line":43,"kind":12},{"name":"time","line":43,"kind":12},{"name":"_set_from_context","line":44,"kind":12},{"line":45,"name":"table","kind":12},{"line":49,"name":"get_stat_table","kind":12},{"kind":12,"line":52,"name":"fill_and_map"},{"kind":12,"name":"mapping","line":52},{"line":53,"name":"_apply_subs","kind":12},{"kind":12,"name":"_prepare_data","line":54},{"containerName":"Clickhouse::Client","line":55,"name":"MR","kind":12},{"containerName":"Founder::Stat::Logger","line":55,"name":"send","kind":12},{"kind":12,"line":57,"name":"name"},{"containerName":"Config","line":59,"name":"Founder","kind":12},{"containerName":"Founder::Stat::Logger","kind":12,"line":59,"name":"get"},{"containerName":"Config","kind":12,"name":"Founder","line":60},{"kind":12,"name":"is_test_server","line":60,"containerName":"Founder::Stat::Logger"},{"kind":12,"name":"name","line":61},{"kind":12,"line":62,"name":"date"},{"name":"time","line":63,"kind":12},{"name":"Founder","line":64,"kind":12,"containerName":"Config"},{"line":64,"name":"dwh","kind":12,"containerName":"Founder::Stat::Logger"},{"kind":12,"line":65,"name":"send","containerName":"Founder::Stat::Logger"},{"line":65,"name":"name","kind":12},{"line":68,"name":"log_dbg1","kind":12},{"line":69,"name":"log_dbg1","kind":12},{"line":74,"name":"one_link","kind":12},{"kind":12,"line":78,"name":"send_1link_target"},{"line":83,"name":"blog_aggr","kind":12},{"kind":12,"name":"level_id","line":85},{"containerName":"TP::BlogStatAggregate","name":"Founder","line":89,"kind":12},{"line":89,"name":"Add","kind":12,"containerName":"Founder::Stat::Logger"},{"kind":12,"line":89,"name":"level_id"},{"line":92,"name":"blogger_id","kind":12},{"containerName":"TP::BlogStatAggregate","name":"Founder","line":93,"kind":12},{"line":93,"name":"Add","kind":12,"containerName":"Founder::Stat::Logger"},{"line":93,"name":"blogger_id","kind":12},{"defintion":"sub","kind":12,"name":"send_1link_target","containerName":"Founder::Stat::Logger","children":[{"defintion":"my","kind":13,"name":"$one_link","line":100,"containerName":"send_1link_target"},{"line":100,"name":"%params","kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","line":101,"name":"$ol_category","kind":13,"defintion":"my"},{"kind":13,"name":"$one_link","line":101,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"name":"$project","line":102,"defintion":"my"},{"containerName":"send_1link_target","kind":13,"line":102,"name":"$ol_category"},{"containerName":"send_1link_target","line":103,"name":"$project","kind":13},{"containerName":"send_1link_target","defintion":"my","kind":13,"name":"$uid","line":104},{"defintion":"my","kind":13,"line":105,"name":"$uid_field","containerName":"send_1link_target"},{"kind":13,"name":"$one_link","line":105,"containerName":"send_1link_target"},{"name":"$uid_field","line":106,"kind":13,"containerName":"send_1link_target"},{"defintion":"my","line":107,"name":"$f","kind":13,"containerName":"send_1link_target"},{"line":107,"name":"$uid_field","kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","line":108,"name":"$uid","kind":13},{"containerName":"send_1link_target","name":"$params","line":108,"kind":13},{"kind":13,"line":108,"name":"$f","containerName":"send_1link_target"},{"line":108,"name":"$params","kind":13,"containerName":"send_1link_target"},{"name":"$f","line":108,"kind":13,"containerName":"send_1link_target"},{"kind":13,"name":"$uid","line":111,"containerName":"send_1link_target"},{"containerName":"send_1link_target","name":"$params","line":111,"kind":13},{"containerName":"send_1link_target","kind":13,"name":"$uid_field","line":111},{"kind":13,"line":111,"name":"$params","containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"name":"$uid_field","line":111},{"containerName":"send_1link_target","kind":13,"line":113,"name":"$uid"},{"containerName":"send_1link_target","defintion":"my","name":"$target","line":117,"kind":13},{"kind":13,"line":118,"name":"$project","containerName":"send_1link_target"},{"containerName":"send_1link_target","defintion":"my","kind":13,"line":119,"name":"$check"},{"kind":13,"line":119,"name":"$one_link","containerName":"send_1link_target"},{"containerName":"send_1link_target","name":"$check","line":120,"kind":13},{"containerName":"send_1link_target","name":"$check","line":120,"kind":13},{"kind":13,"name":"$check","line":120,"containerName":"send_1link_target"},{"name":"$check","line":121,"kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"line":121,"name":"$one_link"},{"containerName":"send_1link_target","kind":13,"line":121,"name":"%params"},{"containerName":"send_1link_target","name":"$check","line":122,"kind":13},{"containerName":"send_1link_target","kind":13,"name":"$value","line":125,"defintion":"my"},{"containerName":"send_1link_target","name":"$value_field","line":126,"kind":13,"defintion":"my"},{"containerName":"send_1link_target","line":126,"name":"$one_link","kind":13},{"containerName":"send_1link_target","kind":13,"name":"$value_field","line":127},{"defintion":"my","kind":13,"name":"$f","line":128,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"name":"$value_field","line":128},{"containerName":"send_1link_target","line":129,"name":"$value","kind":13},{"kind":13,"name":"$params","line":129,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"line":129,"name":"$f"},{"containerName":"send_1link_target","line":129,"name":"$params","kind":13},{"containerName":"send_1link_target","line":129,"name":"$f","kind":13},{"containerName":"send_1link_target","line":131,"name":"$value_field","kind":13},{"name":"$value","line":132,"kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","line":132,"name":"$params","kind":13},{"containerName":"send_1link_target","kind":13,"line":132,"name":"$value_field"},{"name":"$params","line":132,"kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","name":"$value_field","line":132,"kind":13},{"containerName":"send_1link_target","line":134,"name":"$value","kind":13},{"containerName":"send_1link_target","kind":13,"line":134,"name":"$value_field"},{"kind":13,"line":136,"name":"$value","containerName":"send_1link_target"},{"kind":13,"name":"$target","line":140,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"name":"$ol_category","line":141},{"containerName":"send_1link_target","kind":13,"line":142,"name":"$uid"},{"kind":13,"line":143,"name":"$one_link","containerName":"send_1link_target"},{"containerName":"send_1link_target","name":"$value","line":144,"kind":13},{"containerName":"send_1link_target","kind":13,"line":147,"name":"$check","defintion":"my"},{"kind":13,"name":"$one_link","line":147,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"line":148,"name":"$check"},{"containerName":"send_1link_target","defintion":"my","line":149,"name":"$existed","kind":13},{"containerName":"send_1link_target","line":149,"name":"$ol_category","kind":13},{"kind":13,"name":"$uid","line":149,"containerName":"send_1link_target"},{"kind":13,"name":"$one_link","line":149,"containerName":"send_1link_target"},{"line":150,"name":"$existed","kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"name":"$existed","line":150},{"line":153,"name":"$check","kind":13,"containerName":"send_1link_target"},{"containerName":"send_1link_target","line":153,"name":"$check","kind":13},{"kind":13,"name":"$check","line":154,"containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"line":154,"name":"$one_link"},{"kind":13,"line":154,"name":"%params","containerName":"send_1link_target"},{"containerName":"send_1link_target","kind":13,"line":157,"name":"$target"},{"containerName":"send_1link_target","kind":13,"name":"$ol_category","line":158},{"containerName":"send_1link_target","name":"$uid","line":159,"kind":13},{"containerName":"send_1link_target","kind":13,"line":160,"name":"$one_link"},{"kind":13,"name":"$target","line":163,"containerName":"send_1link_target"}],"line":99},{"name":"category","line":101,"kind":12},{"kind":12,"line":102,"name":"Founder","containerName":"Stat::OneLink::Target::Config::projects"},{"line":105,"name":"uid","kind":12},{"kind":12,"line":114,"name":"log_error"},{"line":118,"name":"is_multi","kind":12},{"name":"check","line":119,"kind":12},{"name":"log_warn","line":123,"kind":12},{"kind":12,"name":"value","line":126},{"name":"log_error","line":137,"kind":12},{"line":140,"name":"Founder","kind":12,"containerName":"Stat::OneLink::Target"},{"containerName":"Founder::Stat::Logger","kind":12,"line":140,"name":"new"},{"name":"project_name","line":141,"kind":12},{"kind":12,"name":"uid","line":142},{"kind":12,"line":143,"name":"event_num"},{"kind":12,"name":"event_num","line":143},{"line":144,"name":"event_value","kind":12},{"kind":12,"line":147,"name":"check"},{"containerName":"Stat::OneLink::Target","name":"Founder","line":149,"kind":12},{"containerName":"Founder::Stat::Logger","kind":12,"line":149,"name":"select_by_user_event"},{"name":"event_num","line":149,"kind":12},{"name":"limit","line":149,"kind":12},{"containerName":"Stat::OneLink::Target","kind":12,"line":157,"name":"Founder"},{"name":"new","line":157,"kind":12,"containerName":"Founder::Stat::Logger"},{"kind":12,"name":"project_name","line":158},{"name":"uid","line":159,"kind":12},{"kind":12,"line":160,"name":"event_num"},{"kind":12,"name":"event_num","line":160},{"kind":12,"name":"insert","line":163,"containerName":"Founder::Stat::Logger"},{"children":[{"defintion":"my","kind":13,"name":"$params","line":168,"containerName":"_apply_subs"},{"kind":13,"name":"$table","line":168,"containerName":"_apply_subs"},{"containerName":"_apply_subs","name":"$subs","line":169,"kind":13,"defintion":"my"},{"containerName":"_apply_subs","kind":13,"line":169,"name":"$table"},{"line":170,"name":"$params","kind":13,"containerName":"_apply_subs"},{"containerName":"_apply_subs","kind":13,"line":170,"name":"$subs"},{"containerName":"_apply_subs","line":171,"name":"$k","kind":13,"defintion":"my"},{"kind":13,"line":171,"name":"$params","containerName":"_apply_subs"},{"containerName":"_apply_subs","kind":13,"name":"$subs","line":172},{"kind":13,"line":172,"name":"$k","containerName":"_apply_subs"},{"kind":13,"line":173,"name":"$params","containerName":"_apply_subs"},{"kind":13,"name":"$k","line":173,"containerName":"_apply_subs"},{"kind":13,"name":"$subs","line":173,"containerName":"_apply_subs"},{"containerName":"_apply_subs","kind":13,"line":173,"name":"$k"},{"containerName":"_apply_subs","line":173,"name":"$params","kind":13},{"containerName":"_apply_subs","kind":13,"line":173,"name":"$k"},{"kind":13,"name":"$params","line":176,"containerName":"_apply_subs"}],"line":167,"kind":12,"name":"_apply_subs","defintion":"sub","containerName":"Founder::Stat::Logger"},{"kind":12,"name":"subs","line":169},{"children":[{"containerName":"_set_from_context","defintion":"my","kind":13,"name":"$params","line":180},{"containerName":"_set_from_context","kind":13,"name":"$context","line":180},{"containerName":"_set_from_context","defintion":"my","name":"$actor","line":181,"kind":13},{"kind":13,"line":182,"name":"$context","containerName":"_set_from_context"},{"containerName":"_set_from_context","line":183,"name":"$actor","kind":13},{"containerName":"_set_from_context","line":183,"name":"$context","kind":13},{"containerName":"_set_from_context","kind":13,"name":"$actor","line":185},{"kind":13,"line":185,"name":"$context","containerName":"_set_from_context"},{"containerName":"_set_from_context","kind":13,"name":"$params","line":187},{"containerName":"_set_from_context","line":187,"name":"$context","kind":13},{"containerName":"_set_from_context","kind":13,"name":"$params","line":188},{"containerName":"_set_from_context","kind":13,"line":188,"name":"$params"},{"containerName":"_set_from_context","kind":13,"line":188,"name":"$params"},{"containerName":"_set_from_context","kind":13,"line":188,"name":"$params"},{"containerName":"_set_from_context","line":191,"name":"$actor","kind":13},{"kind":13,"name":"$params","line":192,"containerName":"_set_from_context"},{"containerName":"_set_from_context","kind":13,"name":"$actor","line":192},{"containerName":"_set_from_context","name":"$params","line":193,"kind":13},{"kind":13,"name":"$actor","line":193,"containerName":"_set_from_context"},{"containerName":"_set_from_context","kind":13,"name":"$params","line":194},{"kind":13,"line":194,"name":"$params","containerName":"_set_from_context"},{"line":194,"name":"$params","kind":13,"containerName":"_set_from_context"},{"kind":13,"name":"$params","line":194,"containerName":"_set_from_context"},{"containerName":"_set_from_context","kind":13,"line":194,"name":"$actor"},{"line":195,"name":"$params","kind":13,"containerName":"_set_from_context"},{"containerName":"_set_from_context","name":"$actor","line":195,"kind":13},{"containerName":"_set_from_context","kind":13,"line":197,"name":"$params"}],"line":179,"containerName":"Founder::Stat::Logger","kind":12,"name":"_set_from_context","defintion":"sub"},{"containerName":"Founder::Stat::Logger","kind":12,"name":"actor","line":185},{"name":"encode_utf8","line":188,"kind":12},{"kind":12,"line":188,"name":"utf8","containerName":"is_utf8"},{"line":192,"name":"actor_id","kind":12},{"containerName":"Founder::Stat::Logger","line":192,"name":"id","kind":12},{"line":193,"name":"email","kind":12},{"line":193,"name":"email","kind":12,"containerName":"Founder::Stat::Logger"},{"name":"social_source","line":194,"kind":12},{"name":"app_id","line":194,"kind":12},{"kind":12,"line":194,"name":"app_id"},{"kind":12,"name":"app_id","line":194},{"name":"oauth_source","line":194,"kind":12,"containerName":"Founder::Stat::Logger"},{"line":195,"name":"social_id","kind":12},{"kind":12,"line":195,"name":"oauth_user_id","containerName":"Founder::Stat::Logger"},{"name":"_prepare_data","kind":12,"defintion":"sub","containerName":"Founder::Stat::Logger","line":200,"children":[{"name":"$params","line":201,"kind":13,"defintion":"my","containerName":"_prepare_data"},{"line":201,"name":"$table","kind":13,"containerName":"_prepare_data"},{"containerName":"_prepare_data","name":"$schema","line":202,"kind":13,"defintion":"my"},{"name":"$table","line":202,"kind":13,"containerName":"_prepare_data"},{"containerName":"_prepare_data","kind":13,"line":203,"name":"$data","defintion":"my"},{"containerName":"_prepare_data","name":"$schema","line":204,"kind":13},{"defintion":"my","kind":13,"name":"$name","line":205,"containerName":"_prepare_data"},{"containerName":"_prepare_data","kind":13,"line":205,"name":"$schema"},{"containerName":"_prepare_data","defintion":"my","kind":13,"line":206,"name":"$type"},{"containerName":"_prepare_data","kind":13,"name":"$schema","line":206},{"containerName":"_prepare_data","defintion":"my","line":207,"name":"$value","kind":13},{"containerName":"_prepare_data","name":"$params","line":207,"kind":13},{"containerName":"_prepare_data","kind":13,"line":207,"name":"$name"},{"line":209,"name":"$type","kind":13,"containerName":"_prepare_data"},{"line":210,"name":"$value","kind":13,"containerName":"_prepare_data"},{"containerName":"_prepare_data","line":210,"name":"$value","kind":13},{"containerName":"_prepare_data","line":210,"name":"$value","kind":13},{"line":211,"name":"$type","kind":13,"containerName":"_prepare_data"},{"line":212,"name":"$value","kind":13,"containerName":"_prepare_data"},{"kind":13,"name":"$value","line":212,"containerName":"_prepare_data"},{"kind":13,"name":"$type","line":213,"containerName":"_prepare_data"},{"kind":13,"name":"$value","line":214,"containerName":"_prepare_data"},{"line":214,"name":"$value","kind":13,"containerName":"_prepare_data"},{"containerName":"_prepare_data","line":219,"name":"$data","kind":13},{"containerName":"_prepare_data","kind":13,"name":"$value","line":219},{"line":221,"name":"$data","kind":13,"containerName":"_prepare_data"}]},{"kind":12,"name":"schema","line":202},{"kind":12,"line":216,"name":"log_error"}]